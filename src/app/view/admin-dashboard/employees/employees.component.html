<!-- ===== PAGE MES EMPLOY√âS ===== -->
<div class="page-section">
  
  <!-- Section de contenu principal -->
  <section class="content-section">
    
    <!-- ===== En-t√™te de page avec titre et bouton d'ajout ===== -->
    <div class="section-header">
      <!-- Titre de la page -->
      <h2 class="section-title-main">üë®‚Äçüíº Mes Employ√©s</h2>
      
      <!-- Bouton pour ajouter un nouvel employ√© -->
      <button class="btn btn-primary" (click)="openAddEmployeeModal()">
        ‚ûï Ajouter un employ√©
      </button>
    </div>

    <!-- ===== Statistiques globales des employ√©s ===== -->
    <div class="employees-stats-grid">
      
      <!-- Carte stat: Total Employ√©s -->
      <div class="stat-card stat-card-blue">
        <div class="stat-icon">üë•</div>
        <div class="stat-content">
          <div class="stat-label">Total Employ√©s</div>
          <!-- Affichage dynamique du nombre total -->
          <div class="stat-value">{{ getTotalEmployeesCount() }}</div>
          <div class="stat-change positive">+5 ce mois</div>
        </div>
      </div>

      <!-- Carte stat: Ventes Moyennes -->
      <div class="stat-card stat-card-green">
        <div class="stat-icon">üí∞</div>
        <div class="stat-content">
          <div class="stat-label">Ventes Moyennes</div>
          <div class="stat-value">{{ getAverageSales() }}</div>
          <div class="stat-change positive">+12% ce mois</div>
        </div>
      </div>

      <!-- Carte stat: Heures Moyennes -->
      <div class="stat-card stat-card-purple">
        <div class="stat-icon">‚è±Ô∏è</div>
        <div class="stat-content">
          <div class="stat-label">Heures Moyennes</div>
          <div class="stat-value">{{ getAverageHours() }}</div>
          <div class="stat-change neutral">Stable</div>
        </div>
      </div>
    </div>

    <!-- ===== Tableau de tous les employ√©s ===== -->
    <div class="employees-table">
      
      <!-- En-t√™te du tableau -->
      <div class="table-header">
        <h3>Liste compl√®te des employ√©s</h3>
      </div>

      <!-- Contenu du tableau -->
      <div class="table-content">
        
        <!-- Boucle sur chaque employ√© -->
        <div *ngFor="let employee of getAllEmployees()" class="employee-row">
          
          <!-- Avatar de l'employ√© -->
          <div class="employee-avatar-sm">{{ employee.avatar }}</div>
          
          <!-- D√©tails de l'employ√© (nom et poste) -->
          <div class="employee-details">
            <div class="employee-name-bold">{{ employee.name }}</div>
            <div class="employee-position-sm">{{ employee.position }}</div>
          </div>
          
          <!-- M√©triques de performance -->
          <div class="employee-metrics">
            <!-- Ventes r√©alis√©es -->
            <span class="metric-item">üí∞ {{ employee.ventes }}</span>
            <!-- Heures travaill√©es -->
            <span class="metric-item">‚è±Ô∏è {{ employee.heures }}</span>
          </div>
          
          <!-- Actions disponibles sur chaque ligne -->
          <div class="employee-row-actions">
            <!-- Bouton modifier -->
            <button class="btn-icon" 
                    title="Modifier"
                    (click)="editEmployee(employee)">
              ‚úèÔ∏è
            </button>
            
            <!-- Bouton voir d√©tails -->
            <button class="btn-icon" 
                    title="Voir d√©tails"
                    (click)="viewEmployeeDetails(employee)">
              üëÅÔ∏è
            </button>
            
            <!-- Bouton supprimer -->
            <button class="btn-icon btn-danger" 
                    title="Supprimer"
                    (click)="deleteEmployee(employee)">
              üóëÔ∏è
            </button>
          </div>
        </div>
        
        <!-- Message si aucun employ√© -->
        <div *ngIf="getAllEmployees().length === 0" class="empty-state">
          <div class="empty-icon">üì≠</div>
          <p>Aucun employ√© pour le moment</p>
          <button class="btn btn-primary" (click)="openAddEmployeeModal()">
            Ajouter le premier employ√©
          </button>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- ===== MODAL AJOUTER EMPLOY√â ===== -->
<div *ngIf="isAddEmployeeModalOpen" 
     class="modal" 
     (click)="closeAddEmployeeModal()">
  
  <!-- Contenu du modal (emp√™che la fermeture au clic) -->
  <div class="modal-content" (click)="$event.stopPropagation()">
    
    <!-- En-t√™te du modal -->
    <div class="modal-header">
      <h2 class="modal-title">‚ûï Ajouter un nouvel employ√©</h2>
      <!-- Bouton de fermeture -->
      <button class="close-btn" (click)="closeAddEmployeeModal()">√ó</button>
    </div>

    <!-- Corps du modal avec formulaire -->
    <div class="modal-body">
      <form>
        
        <!-- Champ: Pr√©nom -->
        <div class="form-group">
          <label class="form-label">Pr√©nom *</label>
          <input type="text"
                 class="form-input"
                 [(ngModel)]="newEmployeeForm.firstName"
                 name="firstName"
                 placeholder="Ex: Alice"
                 required>
        </div>

        <!-- Champ: Nom -->
        <div class="form-group">
          <label class="form-label">Nom *</label>
          <input type="text"
                 class="form-input"
                 [(ngModel)]="newEmployeeForm.lastName"
                 name="lastName"
                 placeholder="Ex: Martin"
                 required>
        </div>

        <!-- Champ: Email -->
        <div class="form-group">
          <label class="form-label">Email *</label>
          <input type="email"
                 class="form-input"
                 [(ngModel)]="newEmployeeForm.email"
                 name="email"
                 placeholder="Ex: alice.martin@drinkstore.com"
                 required>
        </div>

        <!-- Champ: T√©l√©phone -->
        <div class="form-group">
          <label class="form-label">T√©l√©phone</label>
          <input type="tel"
                 class="form-input"
                 [(ngModel)]="newEmployeeForm.phone"
                 name="phone"
                 placeholder="Ex: +234 801 234 5678">
        </div>

        <!-- Champ: Cave d'affectation -->
        <div class="form-group">
          <label class="form-label">Cave d'affectation *</label>
          <select class="form-input"
                  [(ngModel)]="newEmployeeForm.caveId"
                  name="caveId"
                  required>
            <option value="">S√©lectionner une cave...</option>
            <!-- Boucle sur les caves disponibles -->
            <option *ngFor="let cave of caves" [value]="cave.id">
              {{ cave.name }}
            </option>
          </select>
        </div>

        <!-- Champ: Manager (affich√© seulement si cave s√©lectionn√©e) -->
        <div class="form-group" *ngIf="newEmployeeForm.caveId">
          <label class="form-label">Manager de supervision *</label>
          <select class="form-input"
                  [(ngModel)]="newEmployeeForm.managerId"
                  name="managerId"
                  required>
            <option value="">S√©lectionner un manager...</option>
            <!-- Boucle sur les managers de la cave s√©lectionn√©e -->
            <option *ngFor="let manager of getManagersByCave(newEmployeeForm.caveId)"
                    [value]="manager.name">
              {{ manager.name }} - {{ manager.role }}
            </option>
          </select>
        </div>

        <!-- Champ: Poste -->
        <div class="form-group">
          <label class="form-label">Poste *</label>
          <select class="form-input"
                  [(ngModel)]="newEmployeeForm.position"
                  name="position"
                  required>
            <option value="">S√©lectionner un poste...</option>
            <option value="Caissier(√®re)">Caissier(√®re)</option>
            <option value="Vendeur(se)">Vendeur(se)</option>
            <option value="Magasinier">Magasinier</option>
            <option value="Livreur">Livreur</option>
            <option value="Assistant(e)">Assistant(e)</option>
            <option value="Sommelier">Sommelier</option>
            <option value="Conseiller(√®re)">Conseiller(√®re)</option>
          </select>
        </div>
      </form>
    </div>

    <!-- Pied du modal avec boutons d'action -->
    <div class="modal-footer">
      <!-- Bouton annuler -->
      <button class="btn btn-cancel" (click)="closeAddEmployeeModal()">
        Annuler
      </button>
      
      <!-- Bouton confirmer -->
      <button class="btn btn-primary" (click)="addNewEmployee()">
        Ajouter l'employ√©
      </button>
    </div>
  </div>
</div>