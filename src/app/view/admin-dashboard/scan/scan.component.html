<!-- ===== PAGE SCAN ===== -->
<div class="page-section">
  
  <section class="content-section">
    
    <!-- En-tête de la page -->
    <div class="section-header">
      <h2 class="section-title-main">📷 Scanner un Produit</h2>
    </div>

    <!-- Conteneur principal du scan -->
    <div class="scan-container">
      
      <!-- ===== Zone de scan ===== -->
      <div class="scan-area">
        
        <!-- Cadre de scan avec animation -->
        <div class="scan-frame" [class.scanning]="isScanActive">
          
          <!-- Icône de caméra -->
          <div class="scan-icon">📷</div>
          
          <!-- Texte d'instruction dynamique -->
          <div class="scan-text">
            <!-- Message initial: avant le scan -->
            <ng-container *ngIf="!isScanActive && !scanResult">
              Placez le code-barre devant la caméra
            </ng-container>
            
            <!-- Message pendant le scan -->
            <ng-container *ngIf="isScanActive">
              Scan en cours...
            </ng-container>
            
            <!-- Message après le scan -->
            <ng-container *ngIf="scanResult && !isScanActive">
              ✓ Scan terminé
            </ng-container>
          </div>

          <!-- Ligne de scan animée (affichée pendant le scan) -->
          <div *ngIf="isScanActive" class="scan-line"></div>
        </div>

        <!-- ===== Boutons de contrôle ===== -->
        <div class="scan-controls">
          
          <!-- Bouton pour démarrer le scan -->
          <button class="btn btn-primary"
                  *ngIf="!isScanActive && !scanResult"
                  (click)="startScan()">
            🎬 Démarrer le scan
          </button>

          <!-- Bouton pour arrêter le scan en cours -->
          <button class="btn btn-danger"
                  *ngIf="isScanActive"
                  (click)="stopScan()">
            ⏹️ Arrêter le scan
          </button>

          <!-- Bouton pour faire un nouveau scan -->
          <button class="btn btn-secondary"
                  *ngIf="scanResult"
                  (click)="resetScan()">
            🔄 Nouveau scan
          </button>
        </div>
      </div>

      <!-- ===== Résultat du scan ===== -->
      <div *ngIf="scanResult" class="scan-result">
        
        <!-- En-tête du résultat -->
        <div class="result-header">
          <h3>✓ Produit détecté</h3>
        </div>

        <!-- Contenu du résultat (informations formatées en JSON) -->
        <div class="result-content">
          <pre>{{ getFormattedScanResult() }}</pre>
        </div>

        <!-- Actions disponibles sur le produit scanné -->
        <div class="result-actions">
          
          <!-- Bouton: Ajouter au stock -->
          <button class="btn btn-primary" (click)="addToStock()">
            ➕ Ajouter au stock
          </button>
          
          <!-- Bouton: Modifier les infos -->
          <button class="btn btn-secondary" (click)="editProductInfo()">
            📝 Modifier les infos
          </button>
          
          <!-- Bouton: Voir l'historique -->
          <button class="btn btn-info" (click)="viewProductHistory()">
            📊 Voir l'historique
          </button>
        </div>
      </div>
    </div>

    <!-- ===== Instructions d'utilisation ===== -->
    <div class="scan-instructions">
      <h3>💡 Instructions</h3>
      
      <ul>
        <!-- Liste des bonnes pratiques pour scanner -->
        <li>Assurez-vous que le code-barre est bien éclairé</li>
        <li>Maintenez le code-barre stable et à plat</li>
        <li>Positionnez-le à environ 15-20 cm de la caméra</li>
        <li>Attendez le bip de confirmation</li>
      </ul>
      
      <!-- Note technique -->
      <div class="scan-note">
        <strong>Note:</strong> Cette démo simule le scan d'un code-barres. 
        Dans une application réelle, une caméra serait utilisée pour scanner 
        de véritables codes-barres.
      </div>
    </div>
  </section>
</div>