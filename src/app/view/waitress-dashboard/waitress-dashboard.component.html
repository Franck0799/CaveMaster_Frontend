<!-- ==========================================
FICHIER: src/app/server/server-layout/server-layout.component.html
DESCRIPTION: Template du layout Serveuse/Serveur
========================================== -->

<div class="server-layout" [class.sidebar-collapsed]="sidebarCollapsed">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="logo-container">
        <i class="icon wine-icon"></i>
        <span class="logo-text" *ngIf="!sidebarCollapsed">WineFlow</span>
      </div>
      <span class="user-role" *ngIf="!sidebarCollapsed">Serveur</span>
    </div>

    <!-- Statut de présence -->
    <div class="presence-indicator" *ngIf="!sidebarCollapsed">
      <button
        class="presence-btn"
        [class.active]="isPresent"
        (click)="togglePresence()">
        <i class="icon" [class.check-circle]="isPresent" [class.x-circle]="!isPresent"></i>
        <span>{{ isPresent ? 'En Service' : 'Hors Service' }}</span>
      </button>
    </div>

    <!-- Navigation -->
    <nav class="sidebar-nav">
      <a
        *ngFor="let item of menuItems"
        [routerLink]="item.path"
        class="nav-item"
        [class.active]="isActive(item.path)"
        [title]="item.label">
        <i class="icon" [class]="'icon-' + item.icon"></i>
        <span class="nav-label" *ngIf="!sidebarCollapsed">{{ item.label }}</span>
        <span class="badge" *ngIf="item.badge && item.badge > 0">{{ item.badge }}</span>
      </a>
    </nav>

    <!-- Footer Sidebar -->
    <div class="sidebar-footer">
      <button class="sidebar-toggle" (click)="toggleSidebar()" title="Réduire/Agrandir">
        <i class="icon" [class.chevron-left]="!sidebarCollapsed" [class.chevron-right]="sidebarCollapsed"></i>
      </button>
    </div>
  </aside>

  <!-- MAIN CONTENT -->
  <div class="main-wrapper">

    <!-- HEADER -->
    <header class="top-header">
      <div class="header-left">
        <button class="menu-toggle" (click)="toggleSidebar()">
          <i class="icon menu-icon"></i>
        </button>
        <h1 class="page-title">{{ currentUser?.name || 'Serveur' }}</h1>
      </div>

      <div class="header-right">
        <!-- Notifications -->
        <button class="icon-btn notification-btn">
          <i class="icon bell-icon"></i>
          <span class="notification-badge">3</span>
        </button>

        <!-- Theme Toggle -->
        <button class="icon-btn theme-btn" (click)="toggleTheme()" [title]="'Thème: ' + currentTheme">
          <i class="icon" [class]="'icon-' + getThemeIcon()"></i>
        </button>

        <!-- User Menu -->
        <div class="user-menu">
          <div class="user-avatar">
            {{ (currentUser?.name || 'S')[0] }}
          </div>
          <div class="user-info">
            <span class="user-name">{{ currentUser?.name || 'Serveur' }}</span>
            <span class="user-status" [class.online]="isPresent">
              {{ isPresent ? 'En service' : 'Hors service' }}
            </span>
          </div>
          <!--<button class="logout-btn" (click)="logout()" title="Déconnexion">
            <i class="icon log-out-icon"></i>
          </button> -->
        </div>
      </div>
    </header>

    <!-- CONTENT AREA -->
    <main class="content-area">
      <router-outlet></router-outlet>
    </main>
  </div>

</div>
