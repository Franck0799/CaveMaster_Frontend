<div class="presence-page">

  <!-- En-tÃªte -->
  <div class="page-header">
    <div>
      <h1 class="page-title">Gestion des prÃ©sences</h1>
      <p class="page-subtitle">{{ currentDate | date:'EEEE d MMMM y':'':'fr' }}</p>
    </div>
    <div class="header-actions">
      <button class="btn-secondary" (click)="viewHistory()">
        ğŸ“… Historique
      </button>
      <button class="btn-primary" (click)="markPresence()">
        âœ… Marquer prÃ©sence
      </button>
    </div>
  </div>

  <!-- Statistiques -->
  <div class="presence-stats">
    <div class="stat-card present">
      <div class="stat-icon">âœ…</div>
      <div class="stat-content">
        <div class="stat-value">{{ stats.present }}</div>
        <div class="stat-label">PrÃ©sents</div>
      </div>
    </div>

    <div class="stat-card absent">
      <div class="stat-icon">â­•</div>
      <div class="stat-content">
        <div class="stat-value">{{ stats.absent }}</div>
        <div class="stat-label">Absents</div>
      </div>
    </div>

    <div class="stat-card leave">
      <div class="stat-icon">ğŸ–ï¸</div>
      <div class="stat-content">
        <div class="stat-value">{{ stats.leave }}</div>
        <div class="stat-label">En congÃ©</div>
      </div>
    </div>

    <div class="stat-card late">
      <div class="stat-icon">â°</div>
      <div class="stat-content">
        <div class="stat-value">{{ stats.late }}</div>
        <div class="stat-label">En retard</div>
      </div>
    </div>
  </div>

  <!-- Filtres -->
  <div class="filters">
    <div class="filter-group">
      <button class="filter-btn"
              [class.active]="selectedFilter === 'all'"
              (click)="filterBy('all')">
        Tous ({{ stats.totalTeam }})
      </button>
      <button class="filter-btn"
              [class.active]="selectedFilter === 'present'"
              (click)="filterBy('present')">
        PrÃ©sents ({{ stats.present }})
      </button>
      <button class="filter-btn"
              [class.active]="selectedFilter === 'absent'"
              (click)="filterBy('absent')">
        Absents ({{ stats.absent }})
      </button>
    </div>
    <input type="text"
           class="search-input"
           placeholder="Rechercher un membre..."
           [(ngModel)]="searchTerm">
  </div>

  <!-- Liste des membres -->
  <div class="presence-list">
    <div class="member-card" *ngFor="let member of filteredMembers">
      <div class="member-header">
        <div class="member-info">
          <div class="member-avatar">{{ member.avatar }}</div>
          <div class="member-details">
            <div class="member-name">{{ member.name }}</div>
            <div class="member-role">{{ member.role }}</div>
          </div>
        </div>
        <div class="status-badge" [class]="'status-' + member.status">
          {{ getStatusLabel(member.status) }}
        </div>
      </div>

      <div class="member-body">
        <div class="time-info">
          <div class="time-item" *ngIf="member.checkInTime">
            <span class="time-label">ArrivÃ©e:</span>
            <span class="time-value">{{ member.checkInTime }}</span>
          </div>
          <div class="time-item" *ngIf="member.checkOutTime">
            <span class="time-label">DÃ©part:</span>
            <span class="time-value">{{ member.checkOutTime }}</span>
          </div>
          <div class="time-item">
            <span class="time-label">PrÃ©vu:</span>
            <span class="time-value">{{ member.expectedTime }}</span>
          </div>
        </div>

        <div class="member-notes" *ngIf="member.notes">
          <span class="notes-icon">ğŸ’¬</span>
          <span class="notes-text">{{ member.notes }}</span>
        </div>
      </div>

      <div class="member-actions">
        <button class="action-btn" (click)="editPresence(member)">
          âœï¸ Modifier
        </button>
        <button class="action-btn" (click)="viewDetails(member)">
          ğŸ‘ï¸ DÃ©tails
        </button>
      </div>
    </div>
  </div>
</div>
