<div class="contact-page">
  <!-- En-tÃªte -->
  <div class="page-header">
    <div>
      <h1 class="page-title">Contactez-nous</h1>
      <p class="page-subtitle">Notre Ã©quipe vous rÃ©pond dans les 24h</p>
    </div>
    <div class="header-actions">
      <button class="btn-secondary" (click)="toggleHistory()">
        ğŸ“‹ Historique
      </button>
      <button class="btn-secondary" (click)="toggleFAQ()">
        â“ FAQ
      </button>
    </div>
  </div>

  <!-- Actions rapides -->
  <div class="quick-actions">
    <div class="action-card" (click)="callSupport()">
      <div class="action-icon">ğŸ“</div>
      <div class="action-content">
        <div class="action-title">Appeler</div>
        <div class="action-desc">+33 1 23 45 67 89</div>
      </div>
    </div>

    <div class="action-card" (click)="openChat()">
      <div class="action-icon">ğŸ’¬</div>
      <div class="action-content">
        <div class="action-title">Chat</div>
        <div class="action-desc">En ligne 24/7</div>
      </div>
    </div>

    <div class="action-card" (click)="scheduleCall()">
      <div class="action-icon">ğŸ“…</div>
      <div class="action-content">
        <div class="action-title">Planifier</div>
        <div class="action-desc">Rendez-vous</div>
      </div>
    </div>
  </div>

  <!-- Formulaire de contact -->
  <div class="contact-form-container" *ngIf="!showHistory && !showFAQ">
    <div class="form-card">
      <h2 class="form-title">Envoyer un message</h2>

      <form class="contact-form">
        <!-- Nom -->
        <div class="form-group">
          <label for="name">Nom complet *</label>
          <input
            type="text"
            id="name"
            [(ngModel)]="contactForm.name"
            name="name"
            class="form-input"
            placeholder="Votre nom"
            required>
        </div>

        <!-- Email -->
        <div class="form-group">
          <label for="email">Email *</label>
          <input
            type="email"
            id="email"
            [(ngModel)]="contactForm.email"
            name="email"
            class="form-input"
            placeholder="votre@email.com"
            required>
        </div>

        <!-- CatÃ©gorie -->
        <div class="form-group">
          <label for="category">CatÃ©gorie *</label>
          <select
            id="category"
            [(ngModel)]="contactForm.category"
            name="category"
            class="form-select">
            <option *ngFor="let cat of categories" [value]="cat.value">
              {{ cat.label }}
            </option>
          </select>
        </div>

        <!-- PrioritÃ© -->
        <div class="form-group">
          <label for="priority">PrioritÃ©</label>
          <select
            id="priority"
            [(ngModel)]="contactForm.priority"
            name="priority"
            class="form-select">
            <option value="low">Basse</option>
            <option value="medium">Moyenne</option>
            <option value="high">Haute</option>
          </select>
        </div>

        <!-- Sujet -->
        <div class="form-group">
          <label for="subject">Sujet *</label>
          <input
            type="text"
            id="subject"
            [(ngModel)]="contactForm.subject"
            name="subject"
            class="form-input"
            placeholder="Sujet de votre message"
            required>
        </div>

        <!-- Message -->
        <div class="form-group">
          <label for="message">Message *</label>
          <textarea
            id="message"
            [(ngModel)]="contactForm.message"
            name="message"
            class="form-textarea"
            rows="6"
            placeholder="DÃ©crivez votre demande en dÃ©tail..."
            required></textarea>
        </div>

        <!-- Boutons -->
        <div class="form-actions">
          <button
            type="button"
            class="btn-secondary"
            (click)="resetForm()"
            [disabled]="isSubmitting">
            RÃ©initialiser
          </button>
          <button
            type="button"
            class="btn-primary"
            (click)="submitForm()"
            [disabled]="isSubmitting">
            <span *ngIf="!isSubmitting">ğŸ“¤ Envoyer</span>
            <span *ngIf="isSubmitting">â³ Envoi en cours...</span>
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Historique des contacts -->
  <div class="history-section" *ngIf="showHistory">
    <div class="section-header">
      <h2 class="section-title">Historique des contacts</h2>
      <button class="btn-close" (click)="toggleHistory()">âœ•</button>
    </div>

    <div class="history-list">
      <div class="history-card" *ngFor="let contact of contactHistory">
        <div class="history-header">
          <div class="history-icon">{{ getStatusIcon(contact.status) }}</div>
          <div class="history-info">
            <h4 class="history-subject">{{ contact.subject }}</h4>
            <span class="history-date">{{ contact.date | date:'dd/MM/yyyy HH:mm' }}</span>
          </div>
          <span class="status-badge" [class]="'status-' + contact.status">
            {{ getStatusLabel(contact.status) }}
          </span>
        </div>

        <div class="history-body" *ngIf="contact.response">
          <p class="history-response">{{ contact.response }}</p>
        </div>

        <div class="history-actions">
          <button class="btn-link" (click)="viewContactDetails(contact)">
            Voir dÃ©tails
          </button>
        </div>
      </div>

      <div class="empty-state" *ngIf="contactHistory.length === 0">
        <div class="empty-icon">ğŸ“­</div>
        <p class="empty-text">Aucun historique de contact</p>
      </div>
    </div>
  </div>

  <!-- Section FAQ -->
  <div class="faq-section" *ngIf="showFAQ">
    <div class="section-header">
      <h2 class="section-title">Questions frÃ©quentes</h2>
      <button class="btn-close" (click)="toggleFAQ()">âœ•</button>
    </div>

    <div class="faq-list">
      <div class="faq-item" *ngFor="let item of faqItems">
        <div class="faq-question" (click)="toggleFAQItem(item)">
          <span class="faq-icon">{{ item.expanded ? 'â–¼' : 'â–¶' }}</span>
          <span class="faq-text">{{ item.question }}</span>
        </div>
        <div class="faq-answer" *ngIf="item.expanded">
          <p>{{ item.answer }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
