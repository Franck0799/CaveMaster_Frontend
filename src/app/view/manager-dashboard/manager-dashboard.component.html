<div class="dashboard">
  <!-- ===== SIDEBAR ===== -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="logo">
        <span class="logo-icon">ğŸ¾</span>
        <span class="logo-text">DrinkStore</span>
      </div>
    </div>

    <nav class="sidebar-section">
      <div class="nav-item"
           [class.active]="activeTab === 'dashboard'"
           (click)="navigateTo('dashboard')">
        <span class="nav-icon">ğŸ </span>
        <span class="nav-text">Accueil</span>
      </div>

      <div class="nav-item"
           [class.active]="activeTab === 'alerts'"
           (click)="navigateTo('alerts')">
        <span class="nav-icon">ğŸ””</span>
        <span class="nav-text">Alertes</span>
        <span class="notification-badge">12</span>
      </div>

      <div class="nav-item"
           [class.active]="activeTab === 'team'"
           (click)="navigateTo('team')">
        <span class="nav-icon">ğŸ‘¥</span>
        <span class="nav-text">Mon Ã‰quipe</span>
      </div>

      <div class="nav-item"
           [class.active]="activeTab === 'orders'"
           (click)="navigateTo('orders')">
        <span class="nav-icon">ğŸ›’</span>
        <span class="nav-text">Commandes</span>
        <span class="notification-badge">8</span>
      </div>
    </nav>

    <div class="divider"></div>

    <nav class="sidebar-section">
      <div class="section-title">GESTION</div>

      <!-- NOUVEAU: Menu Stock avec activation -->
      <div class="nav-item"
           [class.active]="activeTab === 'stock'"
           (click)="navigateTo('stock')">
        <span class="nav-icon">ğŸ“¦</span>
        <span class="nav-text">Stock</span>
      </div>

      <!-- NOUVEAU: Menu Caisse avec activation -->
      <div class="nav-item"
           [class.active]="activeTab === 'caisse'"
           (click)="navigateTo('caisse')">
        <span class="nav-icon">ğŸ’°</span>
        <span class="nav-text">Caisse</span>
      </div>

      <div class="nav-item">
        <span class="nav-icon">ğŸ“Š</span>
        <span class="nav-text">Ventes</span>
      </div>
      <div class="nav-item">
        <span class="nav-icon">ğŸ‘¤</span>
        <span class="nav-text">Clients</span>
      </div>
    </nav>

    <div class="divider"></div>

    <nav class="sidebar-section">
      <div class="section-title">INFOS</div>
      <div class="nav-item">
        <span class="nav-icon">ğŸ“‹</span>
        <span class="nav-text">Rapports</span>
      </div>
      <div class="nav-item">
        <span class="nav-icon">âš™ï¸</span>
        <span class="nav-text">ParamÃ¨tres</span>
      </div>
      <div class="nav-item">
        <span class="nav-icon">â“</span>
        <span class="nav-text">Aide</span>
      </div>
    </nav>
  </aside>

  <!-- ===== MAIN CONTENT ===== -->
  <main class="main-content">
    <header class="top-header">
      <div class="header-left">
        <h1>ğŸ‘‹ Bonjour, Manager!</h1>
        <p class="header-subtitle">Cave Principale â€¢ Lekki Phase 1, Lagos</p>
      </div>

      <div class="header-right">
        <div class="header-icon" (click)="navigateTo('alerts')">
          <span class="icon">ğŸ””</span>
          <span class="badge">5</span>
        </div>

        <div class="header-icon">
          <span class="icon">ğŸ’¬</span>
          <span class="badge">3</span>
        </div>

        <div class="user-profile" (click)="toggleUserDropdown()">
          <div class="avatar">ğŸ‘¨â€ğŸ’¼</div>
          <div>
            <div class="user-name">Jean Kouassi</div>
            <div class="user-role">Manager Principal</div>
          </div>

          <div class="user-dropdown" *ngIf="showUserDropdown">
            <div class="dropdown-item">ğŸ‘¤ Mon profil</div>
            <div class="dropdown-item">ğŸ“Š Mes performances</div>
            <div class="dropdown-item">âš™ï¸ ParamÃ¨tres</div>
            <div class="dropdown-divider"></div>
            <div class="dropdown-item">ğŸ”„ Changer de cave</div>
            <div class="dropdown-item">ğŸ“± Mode sombre/clair</div>
            <div class="dropdown-divider"></div>
            <div class="dropdown-item">ğŸ’¬ Assistance</div>
            <div class="dropdown-item danger" (click)="logout()">ğŸšª DÃ©connexion</div>
          </div>
        </div>
      </div>
    </header>

    <!-- ===== PAGE DASHBOARD ===== -->
    <div *ngIf="activeTab === 'dashboard'" class="page-section">
      <section class="content-section">
        <div class="section-header">
          <h2 class="section-title-main">Tableau de Bord</h2>
          <p class="section-subtitle">Vue d'ensemble de votre activitÃ©</p>
        </div>

        <div class="stats-grid">
          <div class="stat-card" (click)="navigateTo('caisse')">
            <div class="stat-card-content">
              <div class="stat-icon-wrapper stat-icon-orange">
                <span>ğŸ’°</span>
              </div>
              <div class="stat-info">
                <div class="stat-label">Ventes du Jour</div>
                <div class="stat-value stat-value-orange">850K</div>
                <div class="stat-change positive">+12% vs hier</div>
              </div>
            </div>
          </div>

          <div class="stat-card" (click)="navigateTo('orders')">
            <div class="stat-card-content">
              <div class="stat-icon-wrapper stat-icon-green">
                <span>ğŸ›’</span>
              </div>
              <div class="stat-info">
                <div class="stat-label">Commandes</div>
                <div class="stat-value stat-value-green">34</div>
                <div class="stat-change positive">+8 nouvelles</div>
              </div>
            </div>
          </div>

          <div class="stat-card" (click)="navigateTo('team')">
            <div class="stat-card-content">
              <div class="stat-icon-wrapper stat-icon-blue">
                <span>ğŸ‘¥</span>
              </div>
              <div class="stat-info">
                <div class="stat-label">Ã‰quipe en Service</div>
                <div class="stat-value stat-value-blue">8/12</div>
                <div class="stat-change positive">4 en pause</div>
              </div>
            </div>
          </div>

          <div class="stat-card" (click)="navigateTo('alerts')">
            <div class="stat-card-content">
              <div class="stat-icon-wrapper stat-icon-warning">
                <span>âš ï¸</span>
              </div>
              <div class="stat-info">
                <div class="stat-label">Alertes Actives</div>
                <div class="stat-value stat-value-warning">12</div>
                <div class="stat-change warning">3 urgentes</div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- ===== PAGE ALERTES ===== -->
    <div *ngIf="activeTab === 'alerts'" class="page-section">
      <section class="content-section">
        <div class="section-header">
          <h2 class="section-title-main">Alertes & Notifications</h2>
          <p class="section-subtitle">GÃ©rez vos alertes en temps rÃ©el</p>
        </div>

        <div class="alerts-grid">
          <div class="alert-card">
            <div class="alert-header">
              <div class="alert-title">ğŸ“¦ Alertes Stock</div>
              <span class="alert-count">5</span>
            </div>
            <div class="alert-body">
              <div class="alert-item">
                <div class="alert-item-header">
                  <span class="alert-icon">ğŸš¨</span>
                  <div class="alert-content">
                    <div class="alert-item-title">Stock critique</div>
                    <div class="alert-item-desc">Hennessy VSOP - Seulement 3 bouteilles restantes</div>
                    <div class="alert-time">Il y a 15 min</div>
                    <span class="alert-priority priority-high">URGENT</span>
                  </div>
                </div>
              </div>
              <div class="alert-item">
                <div class="alert-item-header">
                  <span class="alert-icon">âš ï¸</span>
                  <div class="alert-content">
                    <div class="alert-item-title">Stock faible</div>
                    <div class="alert-item-desc">Dom PÃ©rignon - 8 bouteilles restantes</div>
                    <div class="alert-time">Il y a 1h</div>
                    <span class="alert-priority priority-medium">MOYEN</span>
                  </div>
                </div>
              </div>
              <div class="alert-item">
                <div class="alert-item-header">
                  <span class="alert-icon">âš ï¸</span>
                  <div class="alert-content">
                    <div class="alert-item-title">Stock faible</div>
                    <div class="alert-item-desc">ChÃ¢teau Margaux - 12 bouteilles</div>
                    <div class="alert-time">Il y a 2h</div>
                    <span class="alert-priority priority-medium">MOYEN</span>
                  </div>
                </div>
              </div>
              <div class="alert-item">
                <div class="alert-item-header">
                  <span class="alert-icon">ğŸ“Š</span>
                  <div class="alert-content">
                    <div class="alert-item-title">Inventaire recommandÃ©</div>
                    <div class="alert-item-desc">RÃ©approvisionnement suggÃ©rÃ©: Heineken</div>
                    <div class="alert-time">Il y a 3h</div>
                    <span class="alert-priority priority-low">INFO</span>
                  </div>
                </div>
              </div>
              <div class="alert-item">
                <div class="alert-item-header">
                  <span class="alert-icon">âœ…</span>
                  <div class="alert-content">
                    <div class="alert-item-title">Livraison reÃ§ue</div>
                    <div class="alert-item-desc">50 bouteilles de vin rouge ajoutÃ©es</div>
                    <div class="alert-time">Il y a 4h</div>
                    <span class="alert-priority priority-low">INFO</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="alert-card">
            <div class="alert-header">
              <div class="alert-title">â­ RÃ©servations VIP</div>
              <span class="alert-count">4</span>
            </div>
            <div class="alert-body">
              <div class="alert-item">
                <div class="alert-item-header">
                  <span class="alert-icon">ğŸ‘‘</span>
                  <div class="alert-content">
                    <div class="alert-item-title">Nouvelle rÃ©servation VIP</div>
                    <div class="alert-item-desc">Client Premium - 20 bouteilles Dom PÃ©rignon</div>
                    <div class="alert-time">Il y a 10 min</div>
                    <span class="alert-priority priority-high">URGENT</span>
                  </div>
                </div>
              </div>
              <div class="alert-item">
                <div class="alert-item-header">
                  <span class="alert-icon">â­</span>
                  <div class="alert-content">
                    <div class="alert-item-title">RÃ©servation confirmÃ©e</div>
                    <div class="alert-item-desc">Ã‰vÃ©nement corporate - 50 bouteilles mixtes</div>
                    <div class="alert-time">Il y a 30 min</div>
                    <span class="alert-priority priority-medium">MOYEN</span>
                  </div>
                </div>
              </div>
              <div class="alert-item">
                <div class="alert-item-header">
                  <span class="alert-icon">ğŸ‰</span>
                  <div class="alert-content">
                    <div class="alert-item-title">RÃ©servation anniversaire</div>
                    <div class="alert-item-desc">Commande spÃ©ciale - 15 bouteilles Champagne</div>
                    <div class="alert-time">Il y a 1h</div>
                    <span class="alert-priority priority-low">INFO</span>
                  </div>
                </div>
              </div>
              <div class="alert-item">
                <div class="alert-item-header">
                  <span class="alert-icon">ğŸ“…</span>
                  <div class="alert-content">
                    <div class="alert-item-title">RÃ©servation Ã  venir</div>
                    <div class="alert-item-desc">Demain 18h - Client VIP rÃ©gulier</div>
                    <div class="alert-time">Il y a 2h</div>
                    <span class="alert-priority priority-low">INFO</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="alert-card">
            <div class="alert-header">
              <div class="alert-title">ğŸ›’ RÃ©servations Standard</div>
              <span class="alert-count">3</span>
            </div>
            <div class="alert-body">
              <div class="alert-item">
                <div class="alert-item-header">
                  <span class="alert-icon">ğŸ›ï¸</span>
                  <div class="alert-content">
                    <div class="alert-item-title">Nouvelle commande</div>
                    <div class="alert-item-desc">Client rÃ©gulier - 5 bouteilles vin rouge</div>
                    <div class="alert-time">Il y a 20 min</div>
                    <span class="alert-priority priority-medium">MOYEN</span>
                  </div>
                </div>
              </div>
              <div class="alert-item">
                <div class="alert-item-header">
                  <span class="alert-icon">ğŸ“¦</span>
                  <div class="alert-content">
                    <div class="alert-item-title">Commande prÃªte</div>
                    <div class="alert-item-desc">Ã€ retirer - 3 bouteilles Hennessy</div>
                    <div class="alert-time">Il y a 45 min</div>
                    <span class="alert-priority priority-medium">MOYEN</span>
                  </div>
                </div>
              </div>
              <div class="alert-item">
                <div class="alert-item-header">
                  <span class="alert-icon">âœ…</span>
                  <div class="alert-content">
                    <div class="alert-item-title">Commande livrÃ©e</div>
                    <div class="alert-item-desc">10 bouteilles biÃ¨res - Victoria Island</div>
                    <div class="alert-time">Il y a 1h</div>
                    <span class="alert-priority priority-low">INFO</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- ===== PAGE Ã‰QUIPE ===== -->
    <div *ngIf="activeTab === 'team'" class="page-section">
      <section class="content-section">
        <div class="section-header">
          <h2 class="section-title-main">Mon Ã‰quipe</h2>
          <p class="section-subtitle">Gestion en temps rÃ©el de votre personnel</p>
        </div>

        <div class="team-grid">
          <div class="team-card" *ngFor="let member of teamData">
            <div class="team-member-header">
              <div class="team-avatar">
                {{member.avatar}}
                <div class="status-indicator" [class]="'status-' + member.status"></div>
              </div>
              <div class="team-info">
                <div class="team-name">{{member.name}}</div>
                <div class="team-position">{{member.position}}</div>
              </div>
            </div>
            <div class="team-details">
              <div class="detail-row">
                <span class="detail-label">Statut</span>
                <span class="status-badge" [class]="'badge-' + member.status">{{member.statusText}}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Heure de dÃ©but</span>
                <span class="detail-value">{{member.heureDebut}}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Temps de travail</span>
                <span class="detail-value">{{member.tempsTravail}}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Pause restante</span>
                <span class="detail-value">{{member.pauseRestante}}</span>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- ===== PAGE COMMANDES ===== -->
    <div *ngIf="activeTab === 'orders'" class="page-section">
      <section class="content-section">
        <div class="section-header">
          <h2 class="section-title-main">Commandes RÃ©centes</h2>
          <p class="section-subtitle">Suivez l'Ã©tat de toutes vos commandes</p>
        </div>

        <div class="orders-container">
          <div class="orders-header">
            <h3 style="font-size: 1.2rem; font-weight: 600;">Filtrer par statut</h3>
            <div class="orders-tabs">
              <button class="order-tab"
                      [class.active]="currentOrderFilter === 'all'"
                      (click)="filterOrders('all')">
                Toutes ({{getOrderCount('all')}})
              </button>
              <button class="order-tab"
                      [class.active]="currentOrderFilter === 'paye'"
                      (click)="filterOrders('paye')">
                PayÃ© ({{getOrderCount('paye')}})
              </button>
              <button class="order-tab"
                      [class.active]="currentOrderFilter === 'en-cours'"
                      (click)="filterOrders('en-cours')">
                En cours ({{getOrderCount('en-cours')}})
              </button>
              <button class="order-tab"
                      [class.active]="currentOrderFilter === 'termine'"
                      (click)="filterOrders('termine')">
                TerminÃ© ({{getOrderCount('termine')}})
              </button>
            </div>
          </div>

          <div class="orders-list">
            <div *ngIf="filteredOrders.length === 0" class="empty-state">
              <div class="empty-state-icon">ğŸ“¦</div>
              <p>Aucune commande dans cette catÃ©gorie</p>
            </div>

            <div class="order-item" *ngFor="let order of filteredOrders">
              <div class="order-header-row">
                <div class="order-id">{{order.id}}</div>
                <div class="order-status" [class]="'status-' + order.status">{{order.statusText}}</div>
              </div>
              <div class="order-details">
                <div class="order-detail-item"><span>ğŸ‘¤</span><span>{{order.client}}</span></div>
                <div class="order-detail-item"><span>ğŸ•</span><span>{{order.date}}</span></div>
              </div>
              <div class="order-products">ğŸ“¦ {{order.produits}}</div>
              <div class="order-total">
                <span class="total-label">Total:</span>
                <span class="total-amount">{{order.total}}</span>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- ===== NOUVELLE PAGE STOCK ===== -->
    <div *ngIf="activeTab === 'stock'" class="page-section">
      <section class="content-section">
        <div class="section-header">
          <h2 class="section-title-main">Gestion du Stock</h2>
          <p class="section-subtitle">Suivez et gÃ©rez votre inventaire par cave</p>
        </div>

        <!-- SÃ©lecteur de cave -->
        <div class="cave-selector">
          <div class="cave-tabs">
            <button *ngFor="let cave of cavesData"
                    class="cave-tab"
                    [class.active]="selectedCaveId === cave.id"
                    (click)="selectCave(cave.id)">
              <div class="cave-tab-icon">ğŸ¢</div>
              <div class="cave-tab-content">
                <div class="cave-tab-name">{{cave.nom}}</div>
                <div class="cave-tab-info">{{cave.stockActuel}}/{{cave.capacite}} bouteilles</div>
              </div>
            </button>
          </div>
        </div>

        <!-- Informations de la cave sÃ©lectionnÃ©e -->
        <div class="cave-info-card" *ngIf="selectedCave">
          <div class="cave-info-header">
            <h3>ğŸ“ {{selectedCave.nom}}</h3>
          </div>
          <div class="cave-info-grid">
            <div class="cave-info-item">
              <span class="info-label">Adresse</span>
              <span class="info-value">{{selectedCave.adresse}}</span>
            </div>
            <div class="cave-info-item">
              <span class="info-label">Responsable</span>
              <span class="info-value">{{selectedCave.responsable}}</span>
            </div>
            <div class="cave-info-item">
              <span class="info-label">CapacitÃ©</span>
              <span class="info-value">{{selectedCave.capacite}} bouteilles</span>
            </div>
            <div class="cave-info-item">
              <span class="info-label">Taux de remplissage</span>
              <span class="info-value">{{(selectedCave.stockActuel / selectedCave.capacite * 100).toFixed(1)}}%</span>
            </div>
          </div>
        </div>

        <!-- Barre de recherche et filtres -->
        <div class="stock-controls">
          <div class="search-box">
            <span class="search-icon">ğŸ”</span>
            <input type="text"
                   placeholder="Rechercher une boisson..."
                   [(ngModel)]="searchStock"
                   class="search-input">
          </div>
          <div class="stock-filters">
            <button class="filter-btn"
                    [class.active]="currentStockFilter === 'all'"
                    (click)="filterStock('all')">
              Toutes ({{getStockCount('all')}})
            </button>
            <button class="filter-btn filter-btn-alert"
                    [class.active]="currentStockFilter === 'alerte'"
                    (click)="filterStock('alerte')">
              âš ï¸ En alerte ({{getStockCount('alerte')}})
            </button>
            <button class="filter-btn filter-btn-ok"
                    [class.active]="currentStockFilter === 'ok'"
                    (click)="filterStock('ok')">
              âœ… Stock OK ({{getStockCount('ok')}})
            </button>
          </div>
        </div>

        <!-- Liste des boissons -->
        <div class="stock-grid">
          <div *ngIf="filteredBoissons.length === 0" class="empty-state">
            <div class="empty-state-icon">ğŸ¾</div>
            <p>Aucune boisson trouvÃ©e</p>
          </div>

          <div class="stock-card" *ngFor="let boisson of filteredBoissons">
            <div class="stock-card-header">
              <div class="stock-product-info">
                <h4 class="stock-product-name">{{boisson.nom}}</h4>
                <span class="stock-category">{{boisson.categorie}}</span>
              </div>
              <div class="stock-alert-indicator" *ngIf="isStockAlerte(boisson)">
                <span class="alert-icon-small">âš ï¸</span>
              </div>
            </div>

            <div class="stock-card-body">
              <div class="stock-quantity-section">
                <div class="stock-quantity-main">
                  <span class="quantity-label">Stock actuel</span>
                  <span class="quantity-value"
                        [class.quantity-alert]="isStockAlerte(boisson)">
                    {{boisson.stocks[selectedCaveId]}}
                  </span>
                </div>
                <div class="stock-threshold">
                  <span class="threshold-label">Seuil d'alerte:</span>
                  <span class="threshold-value">{{boisson.seuilAlerte}}</span>
                </div>
              </div>

              <div class="stock-price">
                <span class="price-label">Prix unitaire:</span>
                <span class="price-value">{{formatMontant(boisson.prixUnitaire)}}</span>
              </div>

              <div class="stock-status-bar">
                <div class="status-bar-fill"
                     [style.width.%]="(boisson.stocks[selectedCaveId] / boisson.seuilAlerte * 100)"
                     [class.status-bar-alert]="isStockAlerte(boisson)"
                     [class.status-bar-ok]="!isStockAlerte(boisson)">
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Historique des mouvements -->
        <div class="mouvements-section">
          <h3 class="mouvements-title">ğŸ“‹ Derniers Mouvements de Stock</h3>
          <div class="mouvements-list">
            <div *ngIf="mouvementsForSelectedCave.length === 0" class="empty-state">
              <p>Aucun mouvement enregistrÃ© pour cette cave</p>
            </div>

            <div class="mouvement-item" *ngFor="let mv of mouvementsForSelectedCave">
              <div class="mouvement-icon" [class]="'mouvement-' + mv.type">
                <span *ngIf="mv.type === 'entree'">ğŸ“¥</span>
                <span *ngIf="mv.type === 'sortie'">ğŸ“¤</span>
                <span *ngIf="mv.type === 'transfert'">ğŸ”„</span>
                <span *ngIf="mv.type === 'perte'">âŒ</span>
              </div>
              <div class="mouvement-content">
                <div class="mouvement-header-row">
                  <span class="mouvement-type-badge" [class]="'badge-' + mv.type">
                    {{mv.typeText}}
                  </span>
                  <span class="mouvement-date">{{mv.date}} Ã  {{mv.heure}}</span>
                </div>
                <div class="mouvement-product">{{mv.boissonNom}}</div>
                <div class="mouvement-details">
                  <span class="mouvement-quantity">QuantitÃ©: {{mv.quantite}}</span>
                  <span class="mouvement-separator">â€¢</span>
                  <span class="mouvement-motif">{{mv.motif}}</span>
                </div>
                <div class="mouvement-operator">Par: {{mv.operateur}}</div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- ===== NOUVELLE PAGE CAISSE ===== -->
    <div *ngIf="activeTab === 'caisse'" class="page-section">
      <section class="content-section">
        <div class="section-header">
          <h2 class="section-title-main">Gestion de Caisse</h2>
          <p class="section-subtitle">Suivez toutes vos transactions et encaissements</p>
        </div>

        <!-- SÃ©lecteur de date -->
        <div class="caisse-date-selector">
          <label for="dateSelect" class="date-label">ğŸ“… Date:</label>
          <input type="date"
                 id="dateSelect"
                 [(ngModel)]="selectedDate"
                 class="date-input">
        </div>

        <!-- RÃ©sumÃ© de la caisse -->
        <div class="caisse-summary-grid">
          <div class="summary-card summary-card-total">
            <div class="summary-icon">ğŸ’°</div>
            <div class="summary-content">
              <div class="summary-label">Total du Jour</div>
              <div class="summary-value">{{formatMontant(totalCaisse)}}</div>
            </div>
          </div>

          <div class="summary-card summary-card-especes">
            <div class="summary-icon">ğŸ’µ</div>
            <div class="summary-content">
              <div class="summary-label">EspÃ¨ces</div>
              <div class="summary-value">{{formatMontant(getTotalByPaymentMethod('especes'))}}</div>
            </div>
          </div>

          <div class="summary-card summary-card-carte">
            <div class="summary-icon">ğŸ’³</div>
            <div class="summary-content">
              <div class="summary-label">Carte Bancaire</div>
              <div class="summary-value">{{formatMontant(getTotalByPaymentMethod('carte'))}}</div>
            </div>
          </div>

          <div class="summary-card summary-card-mobile">
            <div class="summary-icon">ğŸ“±</div>
            <div class="summary-content">
              <div class="summary-label">Paiement Mobile</div>
              <div class="summary-value">{{formatMontant(getTotalByPaymentMethod('mobile'))}}</div>
            </div>
          </div>
        </div>

        <!-- Filtres des transactions -->
        <div class="caisse-filters">
          <h3 style="font-size: 1.1rem; font-weight: 600;">Filtrer par type</h3>
          <div class="caisse-tabs">
            <button class="caisse-tab"[class.active]="currentCaisseFilter === 'all'"
                    (click)="filterCaisse('all')">
              Toutes ({{getCaisseCount('all')}})
            </button>
            <button class="caisse-tab"
                    [class.active]="currentCaisseFilter === 'vente'"
                    (click)="filterCaisse('vente')">
              Ventes ({{getCaisseCount('vente')}})
            </button>
            <button class="caisse-tab"
                    [class.active]="currentCaisseFilter === 'remboursement'"
                    (click)="filterCaisse('remboursement')">
              Remboursements ({{getCaisseCount('remboursement')}})
            </button>
            <button class="caisse-tab"
                    [class.active]="currentCaisseFilter === 'ouverture'"
                    (click)="filterCaisse('ouverture')">
              Ouverture/Fermeture ({{getCaisseCount('ouverture') + getCaisseCount('fermeture')}})
            </button>
          </div>
        </div>

        <!-- Liste des transactions -->
        <div class="transactions-container">
          <div *ngIf="filteredTransactions.length === 0" class="empty-state">
            <div class="empty-state-icon">ğŸ’°</div>
            <p>Aucune transaction pour cette pÃ©riode</p>
          </div>

          <div class="transaction-item" *ngFor="let transaction of filteredTransactions">
            <div class="transaction-header">
              <div class="transaction-icon" [class]="'transaction-' + transaction.type">
                <span *ngIf="transaction.type === 'vente'">ğŸ›’</span>
                <span *ngIf="transaction.type === 'remboursement'">â†©ï¸</span>
                <span *ngIf="transaction.type === 'ouverture'">ğŸ”“</span>
                <span *ngIf="transaction.type === 'fermeture'">ğŸ”’</span>
              </div>
              <div class="transaction-info">
                <div class="transaction-type-row">
                  <span class="transaction-type-badge" [class]="'type-badge-' + transaction.type">
                    {{transaction.typeText}}
                  </span>
                  <span class="transaction-id">{{transaction.id}}</span>
                </div>
                <div class="transaction-datetime">{{transaction.date}} Ã  {{transaction.heure}}</div>
              </div>
              <div class="transaction-amount"
                   [class.amount-positive]="transaction.montant > 0"
                   [class.amount-negative]="transaction.montant < 0">
                {{transaction.montant > 0 ? '+' : ''}}{{formatMontant(transaction.montant)}}
              </div>
            </div>

            <div class="transaction-body">
              <div class="transaction-detail-row" *ngIf="transaction.client">
                <span class="detail-icon">ğŸ‘¤</span>
                <span class="detail-text">Client: {{transaction.client}}</span>
              </div>
              <div class="transaction-detail-row">
                <span class="detail-icon">ğŸ’³</span>
                <span class="detail-text">{{transaction.moyenPaiementText}}</span>
              </div>
              <div class="transaction-detail-row" *ngIf="transaction.reference">
                <span class="detail-icon">ğŸ“</span>
                <span class="detail-text">RÃ©f: {{transaction.reference}}</span>
              </div>
              <div class="transaction-detail-row">
                <span class="detail-icon">ğŸ‘¨â€ğŸ’¼</span>
                <span class="detail-text">Caissier: {{transaction.caissier}}</span>
              </div>
              <div class="transaction-details-text">
                {{transaction.details}}
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>
</div>
