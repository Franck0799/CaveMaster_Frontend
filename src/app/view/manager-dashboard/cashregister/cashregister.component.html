
<div class="cash-register-page">
  <div class="page-header">
    <div>
      <h1 class="page-title">Gestion de Caisse</h1>
      <p class="page-subtitle">{{ currentDate | date:'EEEE d MMMM y':'':'fr' }}</p>
    </div>
    <button class="btn-primary" (click)="closeCashRegister()" [disabled]="!isOpen">
      ğŸ’¾ ClÃ´turer la caisse
    </button>
  </div>

  <!-- Statut caisse -->
  <div class="cash-status" [class.open]="isOpen" [class.closed]="!isOpen">
    <div class="status-icon">{{ isOpen ? 'ğŸŸ¢' : 'ğŸ”´' }}</div>
    <div class="status-info">
      <div class="status-label">{{ isOpen ? 'Caisse ouverte' : 'Caisse fermÃ©e' }}</div>
      <div class="status-time">{{ isOpen ? 'Depuis ' + openTime : 'FermÃ©e Ã  ' + closeTime }}</div>
    </div>
    <button class="btn-toggle" (click)="toggleCashRegister()" *ngIf="!isOpen">
      â–¶ï¸ Ouvrir la caisse
    </button>
  </div>

  <!-- RÃ©sumÃ© financier -->
  <div class="financial-summary">
    <div class="summary-card">
      <div class="summary-label">Ouverture</div>
      <div class="summary-value">{{ openingAmount | number:'1.2-2' }} â‚¬</div>
    </div>
    <div class="summary-card highlight">
      <div class="summary-label">EspÃ¨ces actuelles</div>
      <div class="summary-value">{{ getCurrentCash() | number:'1.2-2' }} â‚¬</div>
    </div>
    <div class="summary-card">
      <div class="summary-label">Ventes (espÃ¨ces)</div>
      <div class="summary-value success">+{{ getTotalCashSales() | number:'1.2-2' }} â‚¬</div>
    </div>
    <div class="summary-card">
      <div class="summary-label">DÃ©penses</div>
      <div class="summary-value danger">-{{ getTotalExpenses() | number:'1.2-2' }} â‚¬</div>
    </div>
    <div class="summary-card">
      <div class="summary-label">DiffÃ©rence</div>
      <div class="summary-value" [class.success]="getDifference() >= 0" [class.danger]="getDifference() < 0">
        {{ getDifference() | number:'1.2-2' }} â‚¬
      </div>
    </div>
  </div>

  <!-- Actions rapides -->
  <div class="quick-actions" *ngIf="isOpen">
    <button class="action-card" (click)="addExpense()">
      <span class="action-icon">ğŸ’³</span>
      <span class="action-label">Ajouter une dÃ©pense</span>
    </button>
    <button class="action-card" (click)="cashCount()">
      <span class="action-icon">ğŸ’µ</span>
      <span class="action-label">Comptage espÃ¨ces</span>
    </button>
    <button class="action-card" (click)="viewReport()">
      <span class="action-icon">ğŸ“Š</span>
      <span class="action-label">Rapport dÃ©taillÃ©</span>
    </button>
  </div>

  <!-- Transactions -->
  <div class="transactions-section">
    <h3 class="section-title">Historique des transactions</h3>

    <div class="transactions-list">
      <div class="transaction-item" *ngFor="let transaction of transactions" [class]="'type-' + transaction.type">
        <div class="transaction-icon">
          {{ getTransactionIcon(transaction.type) }}
        </div>
        <div class="transaction-content">
          <div class="transaction-description">{{ transaction.description }}</div>
          <div class="transaction-time">{{ transaction.timestamp | date:'HH:mm' }}</div>
        </div>
        <div class="transaction-amount"
             [class.positive]="transaction.type === 'opening' || transaction.type === 'sale'"
             [class.negative]="transaction.type === 'expense'">
          {{ transaction.type === 'expense' ? '-' : '+' }}{{ transaction.amount | number:'1.2-2' }} â‚¬
        </div>
      </div>
    </div>
  </div>
</div>
