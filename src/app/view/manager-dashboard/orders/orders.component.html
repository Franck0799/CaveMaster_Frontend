
<div class="orders-page">
  <div class="page-header">
    <div>
      <h1 class="page-title">Commandes en cours</h1>
      <p class="page-subtitle">{{ getActiveOrdersCount() }} commandes actives</p>
    </div>
    <button class="btn-refresh" (click)="refreshOrders()">
      ğŸ”„ Actualiser
    </button>
  </div>

  <!-- Statistiques -->
  <div class="stats-row">
    <div class="stat-item pending">
      <span class="stat-count">{{ getCountByStatus('pending') }}</span>
      <span class="stat-label">En attente</span>
    </div>
    <div class="stat-item progress">
      <span class="stat-count">{{ getCountByStatus('in-progress') }}</span>
      <span class="stat-label">En prÃ©paration</span>
    </div>
    <div class="stat-item ready">
      <span class="stat-count">{{ getCountByStatus('ready') }}</span>
      <span class="stat-label">PrÃªtes</span>
    </div>
  </div>

  <!-- Filtres -->
  <div class="filters">
    <button class="filter-btn"
            [class.active]="selectedStatus === 'all'"
            (click)="filterByStatus('all')">
      Toutes
    </button>
    <button class="filter-btn"
            [class.active]="selectedStatus === 'pending'"
            (click)="filterByStatus('pending')">
      En attente
    </button>
    <button class="filter-btn"
            [class.active]="selectedStatus === 'in-progress'"
            (click)="filterByStatus('in-progress')">
      En prÃ©paration
    </button>
    <button class="filter-btn"
            [class.active]="selectedStatus === 'ready'"
            (click)="filterByStatus('ready')">
      PrÃªtes
    </button>
  </div>

  <!-- Liste des commandes -->
  <div class="orders-grid">
    <div class="order-card" *ngFor="let order of filteredOrders" [class]="'status-' + order.status">
      <div class="order-header">
        <div class="order-info">
          <h3 class="order-id">{{ order.id }}</h3>
          <span class="table-number">{{ order.tableNumber }}</span>
        </div>
        <span class="status-badge" [class]="'status-' + order.status">
          {{ getStatusLabel(order.status) }}
        </span>
      </div>

      <div class="order-body">
        <div class="server-info">
          <span class="server-icon">ğŸ‘¨â€ğŸ³</span>
          <span class="server-name">{{ order.server }}</span>
        </div>

        <div class="items-list">
          <div class="item" *ngFor="let item of order.items">
            <span class="item-name">{{ item.quantity }}x {{ item.productName }}</span>
            <span class="item-price">{{ item.price * item.quantity | number:'1.2-2' }} â‚¬</span>
          </div>
        </div>

        <div class="order-notes" *ngIf="order.notes">
          <span class="notes-icon">ğŸ’¬</span>
          <span class="notes-text">{{ order.notes }}</span>
        </div>

        <div class="order-footer">
          <div class="time-info">
            <span class="time-icon">â±ï¸</span>
            <span class="time-text">{{ getTimeAgo(order.createdAt) }}</span>
          </div>
          <div class="total-amount">
            <span class="total-label">Total:</span>
            <span class="total-value">{{ order.totalAmount | number:'1.2-2' }} â‚¬</span>
          </div>
        </div>
      </div>

      <div class="order-actions">
        <button class="action-btn primary"
                *ngIf="order.status === 'pending'"
                (click)="startOrder(order)">
          â–¶ï¸ DÃ©marrer
        </button>
        <button class="action-btn success"
                *ngIf="order.status === 'in-progress'"
                (click)="markReady(order)">
          âœ… PrÃªte
        </button>
        <button class="action-btn info"
                *ngIf="order.status === 'ready'"
                (click)="markServed(order)">
          ğŸ½ï¸ Servie
        </button>
        <button class="action-btn" (click)="viewOrder(order)">
          ğŸ‘ï¸ DÃ©tails
        </button>
      </div>
    </div>
  </div>
</div>
