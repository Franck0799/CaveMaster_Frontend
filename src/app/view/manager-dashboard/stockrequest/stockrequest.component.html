
<div class="stockrequest-page">
  <div class="page-header">
    <div>
      <h1 class="page-title">Demandes de Stock</h1>
      <p class="page-subtitle">G√©rez vos r√©approvisionnements</p>
    </div>
    <button class="btn-primary" (click)="createRequest()">
      ‚ûï Nouvelle demande
    </button>
  </div>

  <!-- Filtres -->
  <div class="filters">
    <button class="filter-btn"
            [class.active]="selectedStatus === 'all'"
            (click)="filterByStatus('all')">
      Toutes ({{ requests.length }})
    </button>
    <button class="filter-btn pending"
            [class.active]="selectedStatus === 'pending'"
            (click)="filterByStatus('pending')">
      En attente ({{ getCountByStatus('pending') }})
    </button>
    <button class="filter-btn approved"
            [class.active]="selectedStatus === 'approved'"
            (click)="filterByStatus('approved')">
      Approuv√©es ({{ getCountByStatus('approved') }})
    </button>
    <button class="filter-btn delivered"
            [class.active]="selectedStatus === 'delivered'"
            (click)="filterByStatus('delivered')">
      Livr√©es ({{ getCountByStatus('delivered') }})
    </button>
  </div>

  <!-- Liste des demandes -->
  <div class="requests-list">
    <div class="request-card" *ngFor="let request of filteredRequests">
      <div class="request-header">
        <div class="product-info">
          <h3 class="product-name">{{ request.productName }}</h3>
          <span class="category-badge">{{ request.category }}</span>
        </div>
        <span class="status-badge" [class]="'status-' + request.status">
          {{ getStatusLabel(request.status) }}
        </span>
      </div>

      <div class="request-body">
        <div class="info-grid">
          <div class="info-item">
            <span class="label">Stock actuel:</span>
            <span class="value">{{ request.currentStock }}</span>
          </div>
          <div class="info-item">
            <span class="label">Quantit√© demand√©e:</span>
            <span class="value highlight">{{ request.requestedQuantity }}</span>
          </div>
          <div class="info-item">
            <span class="label">Date demande:</span>
            <span class="value">{{ request.requestDate | date:'short':'':'fr' }}</span>
          </div>
          <div class="info-item" *ngIf="request.deliveryDate">
            <span class="label">Date livraison:</span>
            <span class="value">{{ request.deliveryDate | date:'short':'':'fr' }}</span>
          </div>
        </div>

        <div class="notes" *ngIf="request.notes">
          <span class="notes-icon">üí¨</span>
          <span class="notes-text">{{ request.notes }}</span>
        </div>
      </div>

      <div class="request-actions">
        <button class="action-btn" (click)="viewRequest(request)">
          üëÅÔ∏è D√©tails
        </button>
        <button class="action-btn" *ngIf="request.status === 'pending'" (click)="editRequest(request)">
          ‚úèÔ∏è Modifier
        </button>
        <button class="action-btn danger" *ngIf="request.status === 'pending'" (click)="cancelRequest(request)">
          ‚ùå Annuler
        </button>
      </div>
    </div>
  </div>
</div>
