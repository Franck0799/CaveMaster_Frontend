
<div class="schedule-page">
  <div class="page-header">
    <div>
      <h1 class="page-title">Planning de l'√©quipe</h1>
      <p class="page-subtitle">{{ getCurrentWeekRange() }}</p>
    </div>
    <div class="header-actions">
      <button class="btn-secondary" (click)="previousWeek()">
        ‚óÄ Semaine pr√©c√©dente
      </button>
      <button class="btn-secondary" (click)="nextWeek()">
        Semaine suivante ‚ñ∂
      </button>
      <button class="btn-primary" (click)="addShift()">
        ‚ûï Ajouter un shift
      </button>
    </div>
  </div>

  <!-- Calendrier hebdomadaire -->
  <div class="calendar-grid">
    <div class="calendar-header">
      <div class="day-column" *ngFor="let day of weekDays">
        <div class="day-name">{{ day.name }}</div>
        <div class="day-date">{{ day.date | date:'dd/MM' }}</div>
      </div>
    </div>

    <div class="calendar-body">
      <div class="day-column" *ngFor="let day of weekDays">
        <div class="shift-card"
             *ngFor="let shift of getShiftsForDay(day.date)"
             [class]="'shift-' + shift.type">
          <div class="shift-header">
            <div class="employee-info">
              <span class="employee-avatar">{{ shift.employeeAvatar }}</span>
              <span class="employee-name">{{ shift.employeeName }}</span>
            </div>
            <span class="status-dot" [class]="'status-' + shift.status"></span>
          </div>
          <div class="shift-time">
            <span class="time-icon">üïê</span>
            <span class="time-text">{{ shift.startTime }} - {{ shift.endTime }}</span>
          </div>
          <div class="shift-actions">
            <button class="action-icon" (click)="editShift(shift)">‚úèÔ∏è</button>
            <button class="action-icon" (click)="deleteShift(shift)">üóëÔ∏è</button>
          </div>
        </div>

        <!-- Zone vide pour ajouter un shift -->
        <div class="add-shift-zone" (click)="addShiftForDay(day.date)">
          <span class="add-icon">‚ûï</span>
          <span class="add-text">Ajouter</span>
        </div>
      </div>
    </div>
  </div>

  <!-- L√©gende -->
  <div class="legend">
    <h4 class="legend-title">Types de service</h4>
    <div class="legend-items">
      <div class="legend-item">
        <span class="legend-dot morning"></span>
        <span class="legend-text">Matin (8h-14h)</span>
      </div>
      <div class="legend-item">
        <span class="legend-dot afternoon"></span>
        <span class="legend-text">Apr√®s-midi (14h-20h)</span>
      </div>
      <div class="legend-item">
        <span class="legend-dot evening"></span>
        <span class="legend-text">Soir (18h-23h)</span>
      </div>
      <div class="legend-item">
        <span class="legend-dot night"></span>
        <span class="legend-text">Nuit (20h-2h)</span>
      </div>
    </div>
  </div>
</div>
<!-- ===== SCHEDULE - MODAL AJOUT SHIFT ===== -->
<div class="modal-overlay" *ngIf="showAddModal" (click)="closeAddModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2 class="modal-title">Ajouter un shift</h2>
      <button class="btn-close" (click)="closeAddModal()">‚úï</button>
    </div>

    <div class="modal-body">
      <div class="form-group">
        <label for="shift-employee">Employ√© *</label>
        <select id="shift-employee" [(ngModel)]="newShift.employeeId" class="form-select">
          <option value="">S√©lectionner un employ√©</option>
          <option *ngFor="let emp of employees" [value]="emp.id">
            {{ emp.avatar }} {{ emp.name }} - {{ emp.role }}
          </option>
        </select>
      </div>

      <div class="form-group" *ngIf="selectedDate">
        <label>Date</label>
        <input type="text" [value]="selectedDate | date:'EEEE d MMMM y':'':'fr'" class="form-input" disabled>
      </div>

      <div class="form-group">
        <label for="shift-type">Type de service</label>
        <select id="shift-type" [(ngModel)]="newShift.type" class="form-select" (change)="onShiftTypeChange()">
          <option *ngFor="let type of shiftTypes" [value]="type.value">
            {{ type.label }} ({{ type.hours }})
          </option>
        </select>
      </div>

      <div class="form-grid">
        <div class="form-group">
          <label for="shift-start">Heure de d√©but *</label>
          <input type="time" id="shift-start" [(ngModel)]="newShift.startTime" class="form-input">
        </div>

        <div class="form-group">
          <label for="shift-end">Heure de fin *</label>
          <input type="time" id="shift-end" [(ngModel)]="newShift.endTime" class="form-input">
        </div>
      </div>

      <div class="form-group">
        <label for="shift-notes">Notes</label>
        <textarea id="shift-notes" [(ngModel)]="newShift.notes" class="form-textarea" rows="2"></textarea>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-secondary" (click)="closeAddModal()">Annuler</button>
      <button class="btn-primary" (click)="performAddShift()">‚ûï Ajouter</button>
    </div>
  </div>
</div>
