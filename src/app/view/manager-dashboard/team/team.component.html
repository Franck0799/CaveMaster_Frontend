<div class="team-page">

  <!-- En-tÃªte -->
  <div class="page-header">
    <div>
      <h1 class="page-title">Mon Ã‰quipe</h1>
      <p class="page-subtitle">{{ teamMembers.length }} membres actifs</p>
    </div>
    <div class="header-actions">
      <button class="btn-secondary" [routerLink]="['/manager', 'schedule']">
        ğŸ“… Planning
      </button>
      <button class="btn-secondary" [routerLink]="['/manager', 'presence']">
        ğŸ“‹ PrÃ©sences
      </button>
      <button class="btn-primary" (click)="addMember()">
        â• Ajouter
      </button>
    </div>
  </div>

  <!-- Vue sÃ©lection -->
  <div class="view-selector">
    <button class="view-btn"
            [class.active]="viewMode === 'grid'"
            (click)="viewMode = 'grid'">
      <span class="icon">â–¦</span>
      Grille
    </button>
    <button class="view-btn"
            [class.active]="viewMode === 'list'"
            (click)="viewMode = 'list'">
      <span class="icon">â˜°</span>
      Liste
    </button>
  </div>

  <!-- Vue Grille -->
  <div class="team-grid" *ngIf="viewMode === 'grid'">
    <div class="member-card" *ngFor="let member of teamMembers">
      <div class="card-header">
        <div class="member-avatar-large">{{ member.avatar }}</div>
        <div class="status-indicator" [class]="'status-' + member.status"></div>
      </div>

      <div class="card-body">
        <h3 class="member-name">{{ member.name }}</h3>
        <p class="member-role">{{ member.role }}</p>

        <div class="member-stats-grid">
          <div class="stat-item">
            <span class="stat-label">Ventes</span>
            <span class="stat-value">{{ member.todaySales }}â‚¬</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Commandes</span>
            <span class="stat-value">{{ member.ordersCompleted }}</span>
          </div>
        </div>

        <div class="member-rating">
          <span class="rating-stars">{{ getRatingStars(member.rating) }}</span>
          <span class="rating-value">{{ member.rating }}/5</span>
        </div>

        <div class="member-contact">
          <div class="contact-item">
            <span class="icon">ğŸ“</span>
            <span class="text">{{ member.phone }}</span>
          </div>
          <div class="contact-item">
            <span class="icon">ğŸ“§</span>
            <span class="text">{{ member.email }}</span>
          </div>
        </div>
      </div>

      <div class="card-footer">
        <button class="action-btn" (click)="viewMember(member)">
          ğŸ‘ï¸ Voir
        </button>
        <button class="action-btn" (click)="contactMember(member)">
          ğŸ’¬ Contacter
        </button>
      </div>
    </div>
  </div>

  <!-- Vue Liste -->
  <div class="team-list" *ngIf="viewMode === 'list'">
    <div class="list-header">
      <div class="col-member">Membre</div>
      <div class="col-status">Statut</div>
      <div class="col-sales">Ventes</div>
      <div class="col-orders">Commandes</div>
      <div class="col-rating">Note</div>
      <div class="col-actions">Actions</div>
    </div>

    <div class="list-item" *ngFor="let member of teamMembers">
      <div class="col-member">
        <div class="member-avatar-small">{{ member.avatar }}</div>
        <div class="member-info">
          <div class="name">{{ member.name }}</div>
          <div class="role">{{ member.role }}</div>
        </div>
      </div>

      <div class="col-status">
        <span class="status-badge" [class]="'status-' + member.status">
          {{ getStatusLabel(member.status) }}
        </span>
      </div>

      <div class="col-sales">
        <span class="value">{{ member.todaySales | number:'1.0-0' }} â‚¬</span>
      </div>

      <div class="col-orders">
        <span class="value">{{ member.ordersCompleted }}</span>
      </div>

      <div class="col-rating">
        <span class="rating">{{ member.rating }} â­</span>
      </div>

      <div class="col-actions">
        <button class="icon-btn" (click)="viewMember(member)" title="Voir">ğŸ‘ï¸</button>
        <button class="icon-btn" (click)="editMember(member)" title="Modifier">âœï¸</button>
        <button class="icon-btn" (click)="contactMember(member)" title="Contacter">ğŸ’¬</button>
      </div>
    </div>
  </div>
</div>
<!-- ===== TEAM COMPONENT - MODAL AJOUT ===== -->
<div class="modal-overlay" *ngIf="showAddModal" (click)="closeAddModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2 class="modal-title">Ajouter un membre</h2>
      <button class="btn-close" (click)="closeAddModal()">âœ•</button>
    </div>

    <div class="modal-body">
      <div class="form-group">
        <label>Avatar</label>
        <div class="avatar-selector">
          <div class="avatar-option"
               *ngFor="let avatar of availableAvatars"
               [class.selected]="newMember.avatar === avatar"
               (click)="newMember.avatar = avatar">
            {{ avatar }}
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="member-name">Nom complet *</label>
        <input type="text" id="member-name" [(ngModel)]="newMember.name" class="form-input" placeholder="Jean Dupont">
      </div>

      <div class="form-group">
        <label for="member-role">RÃ´le *</label>
        <select id="member-role" [(ngModel)]="newMember.role" class="form-select">
          <option value="Serveur">Serveur</option>
          <option value="Serveuse">Serveuse</option>
          <option value="Serveur Senior">Serveur Senior</option>
          <option value="Serveuse Senior">Serveuse Senior</option>
        </select>
      </div>

      <div class="form-group">
        <label for="member-email">Email *</label>
        <input type="email" id="member-email" [(ngModel)]="newMember.email" class="form-input" placeholder="jean@example.com">
      </div>

      <div class="form-group">
        <label for="member-phone">TÃ©lÃ©phone *</label>
        <input type="tel" id="member-phone" [(ngModel)]="newMember.phone" class="form-input" placeholder="+33 6 12 34 56 78">
      </div>

      <div class="form-group">
        <label for="member-status">Statut</label>
        <select id="member-status" [(ngModel)]="newMember.status" class="form-select">
          <option value="present">PrÃ©sent</option>
          <option value="absent">Absent</option>
          <option value="leave">CongÃ©</option>
          <option value="off">Repos</option>
        </select>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-secondary" (click)="closeAddModal()">Annuler</button>
      <button class="btn-primary" (click)="performAddMember()">â• Ajouter</button>
    </div>
  </div>
</div>
<!-- ===== TEAM COMPONENT - MODAL DÃ‰TAILS ===== -->
<div class="modal-overlay" *ngIf="showDetailsModal" (click)="closeDetailsModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2 class="modal-title">DÃ©tails du membre</h2>
      <button class="btn-close" (click)="closeDetailsModal()">âœ•</button>
    </div>

    <div class="modal-body" *ngIf="selectedMember">
      <div class="member-details-header">
        <div class="member-avatar-xl">{{ selectedMember.avatar }}</div>
        <div class="member-info-detailed">
          <h3>{{ selectedMember.name }}</h3>
          <p class="role">{{ selectedMember.role }}</p>
          <span class="status-badge" [class]="'status-' + selectedMember.status">
            {{ getStatusLabel(selectedMember.status) }}
          </span>
        </div>
      </div>

      <div class="details-grid">
        <div class="detail-item">
          <span class="detail-label">Email</span>
          <span class="detail-value">{{ selectedMember.email }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">TÃ©lÃ©phone</span>
          <span class="detail-value">{{ selectedMember.phone }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Date d'embauche</span>
          <span class="detail-value">{{ selectedMember.joinDate | date:'dd/MM/yyyy' }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Note moyenne</span>
          <span class="detail-value">{{ selectedMember.rating }} â­</span>
        </div>
      </div>

      <div class="stats-section">
        <h4>Performances du jour</h4>
        <div class="stats-row">
          <div class="stat">
            <span class="stat-label">Ventes</span>
            <span class="stat-value">{{ selectedMember.todaySales }}â‚¬</span>
          </div>
          <div class="stat">
            <span class="stat-label">Commandes</span>
            <span class="stat-value">{{ selectedMember.ordersCompleted }}</span>
          </div>
        </div>
      </div>
    </div>

   <!-- <div class="modal-footer">
      <button class="btn-secondary" (click)="contactMember(selectedMember)">ğŸ’¬ Contacter</button>
      <button class="btn-primary" (click)="editMember(selectedMember); closeDetailsModal()">âœï¸ Modifier</button>
    </div> -->
  </div>
</div>
