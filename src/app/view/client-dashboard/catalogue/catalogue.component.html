<!-- ==========================================
     FICHIER: src/app/client/catalogue/catalogue.component.html
     DESCRIPTION: Template de la page catalogue
     ========================================== -->

<div class="catalogue-container">

  <!-- Header -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">
        <span class="icon">üç∑</span>
        Catalogue des Vins
      </h1>
      <p class="page-subtitle">{{ filteredWines.length }} vins disponibles</p>
    </div>
    <div class="header-actions">
      <button class="btn-toggle-filters" (click)="toggleFilters()">
        <span class="btn-icon">üîç</span>
        {{ showFilters ? 'Masquer' : 'Afficher' }} filtres
      </button>
      <button class="btn-view-mode" (click)="toggleViewMode()">
        <span class="btn-icon">{{ viewMode === 'grid' ? '‚ò∞' : '‚äû' }}</span>
      </button>
    </div>
  </div>

  <!-- Barre de recherche et filtres -->
  <div class="filters-section" *ngIf="showFilters">
    <div class="search-bar">
      <span class="search-icon">üîç</span>
      <input
        type="text"
        placeholder="Rechercher un vin, r√©gion, c√©page..."
        [(ngModel)]="searchQuery"
        (ngModelChange)="applyFilters()"
        class="search-input"
      />
    </div>

    <div class="filters-row">
      <!-- Filtre Type -->
      <div class="filter-group">
        <label class="filter-label">Type de vin</label>
        <select
          [(ngModel)]="selectedType"
          (ngModelChange)="applyFilters()"
          class="filter-select"
        >
          <option value="all">Tous les types</option>
          <option *ngFor="let type of wineTypes" [value]="type">{{ type }}</option>
        </select>
      </div>

      <!-- Filtre R√©gion -->
      <div class="filter-group">
        <label class="filter-label">R√©gion</label>
        <select
          [(ngModel)]="selectedRegion"
          (ngModelChange)="applyFilters()"
          class="filter-select"
        >
          <option value="all">Toutes les r√©gions</option>
          <option *ngFor="let region of regions" [value]="region">{{ region }}</option>
        </select>
      </div>

      <!-- Filtre Prix -->
      <div class="filter-group">
        <label class="filter-label">Prix</label>
        <select
          [(ngModel)]="selectedPriceRange"
          (ngModelChange)="applyFilters()"
          class="filter-select"
        >
          <option value="all">Tous les prix</option>
          <option *ngFor="let range of priceRanges" [value]="range.value">{{ range.label }}</option>
        </select>
      </div>

      <!-- Tri -->
      <div class="filter-group">
        <label class="filter-label">Trier par</label>
        <select
          [(ngModel)]="sortBy"
          (ngModelChange)="applyFilters()"
          class="filter-select"
        >
          <option *ngFor="let option of sortOptions" [value]="option.value">{{ option.label }}</option>
        </select>
      </div>

      <!-- Bouton reset -->
      <button class="btn-reset" (click)="resetFilters()">
        <span class="reset-icon">‚Üª</span>
        R√©initialiser
      </button>
    </div>
  </div>

  <!-- Liste des vins - Vue grille -->
  <div class="wines-grid" *ngIf="viewMode === 'grid'">
    <div class="wine-card"
     *ngFor="let wine of filteredWines"
     [routerLink]="['/client/wine-detail', wine.id]"
     style="cursor: pointer;">

      <!-- Image du vin -->
      <div class="wine-image">
        <span class="wine-emoji">{{ wine.image }}</span>
        <button class="btn-favorite" (click)="toggleFavorite(wine, $event)">
          <span class="favorite-icon">‚ù§Ô∏è</span>
        </button>
        <span class="stock-badge" [class.low-stock]="wine.stock < 10">
          {{ wine.stock }} en stock
        </span>
      </div>

      <!-- Infos du vin -->
      <div class="wine-info">
        <h3 class="wine-name">{{ wine.name }}</h3>
        <p class="wine-details">{{ wine.region }} ‚Ä¢ {{ wine.grape }} ‚Ä¢ {{ wine.year }}</p>

        <div class="wine-rating">
          <span class="star">‚≠ê</span>
          <span class="rating-value">{{ wine.rating }}</span>
        </div>

        <p class="wine-cave">{{ wine.cave }}</p>

        <div class="wine-footer">
          <span class="wine-price">{{ wine.price }}‚Ç¨</span>
          <button class="btn-add-cart" (click)="addToCart(wine, $event)">
            <span class="cart-icon">üõí</span>
            Ajouter
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Liste des vins - Vue liste -->
  <div class="wines-list" *ngIf="viewMode === 'list'">
    <div class="wine-list-item"
     *ngFor="let wine of filteredWines"
     [routerLink]="['/client/wine-detail', wine.id]"
     style="cursor: pointer;">

      <div class="item-image">
        <span class="wine-emoji">{{ wine.image }}</span>
      </div>

      <div class="item-info">
        <h3 class="item-name">{{ wine.name }}</h3>
        <p class="item-details">{{ wine.region }} ‚Ä¢ {{ wine.type }} ‚Ä¢ {{ wine.grape }} ‚Ä¢ {{ wine.year }}</p>
        <p class="item-cave">{{ wine.cave }}</p>
      </div>

      <div class="item-rating">
        <span class="star">‚≠ê</span>
        <span class="rating-value">{{ wine.rating }}</span>
      </div>

      <div class="item-stock">
        <span class="stock-label">Stock:</span>
        <span class="stock-value" [class.low-stock]="wine.stock < 10">{{ wine.stock }}</span>
      </div>

      <div class="item-price">
        <span class="price-amount">{{ wine.price }}‚Ç¨</span>
      </div>

      <div class="item-actions">
        <button class="btn-favorite-small" (click)="toggleFavorite(wine, $event)">
          ‚ù§Ô∏è
        </button>
        <button class="btn-add-small" (click)="addToCart(wine, $event)">
          Ajouter
        </button>
      </div>
    </div>
  </div>

  <!-- Message si aucun r√©sultat -->
  <div class="empty-state" *ngIf="filteredWines.length === 0">
    <div class="empty-icon">üîç</div>
    <h3 class="empty-title">Aucun vin trouv√©</h3>
    <p class="empty-text">Essayez de modifier vos crit√®res de recherche</p>
    <button class="btn-primary" (click)="resetFilters()">
      R√©initialiser les filtres
    </button>
  </div>

</div>
