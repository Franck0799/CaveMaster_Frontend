<!-- Dashboard Principal -->
<div class="dashboard">
  <!-- ===== SIDEBAR ===== -->
  <aside class="sidebar" [class.active]="sidebarOpen">
    <div class="sidebar-header">
      <div class="logo">
        <span class="logo-icon">ğŸ¾</span>
        <span class="logo-text">DrinkStore</span>
      </div>
    </div>

    <!-- Section Navigation Principale -->
    <nav class="nav-section">
      <div class="nav-item"
           [class.active]="currentPage === 'dashboard'"
           (click)="navigateTo('dashboard')">
        <span class="nav-icon">ğŸ“Š</span>
        <span class="nav-text">Tableau de bord</span>
      </div>
      <div class="nav-item"
           [class.active]="currentPage === 'orders'"
           (click)="navigateTo('orders')">
        <span class="nav-icon">ğŸ›’</span>
        <span class="nav-text">Mes commandes</span>
        <span class="nav-badge">3</span>
      </div>
      <div class="nav-item"
           [class.active]="currentPage === 'products'"
           (click)="navigateTo('products')">
        <span class="nav-icon">ğŸ·</span>
        <span class="nav-text">Catalogue</span>
      </div>
      <div class="nav-item"
           [class.active]="currentPage === 'favorites'"
           (click)="navigateTo('favorites')">
        <span class="nav-icon">â¤ï¸</span>
        <span class="nav-text">Favoris</span>
      </div>
    </nav>

    <div class="divider"></div>

    <!-- Section Mon Compte -->
    <nav class="nav-section">
      <div class="section-label">MON COMPTE</div>
      <div class="nav-item"
           [class.active]="currentPage === 'loyalty'"
           (click)="navigateTo('loyalty')">
        <span class="nav-icon">ğŸ</span>
        <span class="nav-text">FidÃ©litÃ©</span>
      </div>
      <div class="nav-item"
           [class.active]="currentPage === 'payments'"
           (click)="navigateTo('payments')">
        <span class="nav-icon">ğŸ’³</span>
        <span class="nav-text">Paiements</span>
      </div>
      <div class="nav-item"
           [class.active]="currentPage === 'addresses'"
           (click)="navigateTo('addresses')">
        <span class="nav-icon">ğŸ“</span>
        <span class="nav-text">Adresses</span>
      </div>
      <div class="nav-item"
           [class.active]="currentPage === 'notifications'"
           (click)="navigateTo('notifications')">
        <span class="nav-icon">ğŸ””</span>
        <span class="nav-text">Notifications</span>
        <span class="nav-badge">5</span>
      </div>
    </nav>

    <div class="divider"></div>

    <!-- Section Support -->
    <nav class="nav-section">
      <div class="section-label">SUPPORT</div>
      <div class="nav-item">
        <span class="nav-icon">ğŸ’¬</span>
        <span class="nav-text">Chat Support</span>
      </div>
      <div class="nav-item">
        <span class="nav-icon">â“</span>
        <span class="nav-text">FAQ</span>
      </div>
      <div class="nav-item">
        <span class="nav-icon">âš™ï¸</span>
        <span class="nav-text">ParamÃ¨tres</span>
      </div>
      <div class="nav-item">
        <span class="nav-icon">ğŸšª</span>
        <span class="nav-text">DÃ©connexion</span>
      </div>
    </nav>
  </aside>

  <!-- ===== MAIN CONTENT ===== -->
  <main class="main-content">
    <!-- ===== TOP HEADER ===== -->
    <header class="top-header">
      <div class="header-left">
        <!-- Menu Burger Mobile -->
        <div class="burger-menu"
             [class.active]="sidebarOpen"
             (click)="toggleSidebar()">
          <div class="burger-line"></div>
          <div class="burger-line"></div>
          <div class="burger-line"></div>
        </div>

        <!-- Barre de recherche -->
        <div class="search-wrapper">
          <div class="search-bar">
            <input type="text"
                   placeholder="Rechercher un produit, une commande...">
            <button class="search-btn">ğŸ”</button>
          </div>
        </div>
      </div>

      <!-- Droite du header -->
      <div class="header-right">
        <div class="header-icon">
          <span class="icon">ğŸ””</span>
          <span class="badge">{{ notificationCount }}</span>
        </div>

        <div class="user-profile">
          <div class="avatar">ğŸ‘¤</div>
          <div class="user-info">
            <div class="user-name">{{ userName }}</div>
            <div class="user-status">{{ userStatus }}</div>
          </div>
        </div>
      </div>
    </header>

    <!-- ===== PAGE: TABLEAU DE BORD ===== -->
    <div *ngIf="currentPage === 'dashboard'" class="page-section active">
      <div class="content-wrapper">
        <!-- En-tÃªte de la page -->
        <div class="page-header">
          <h1 class="page-title">Bienvenue, {{ userName }} ! ğŸ‘‹</h1>
          <p class="page-subtitle">Voici un aperÃ§u de votre activitÃ© rÃ©cente</p>
        </div>

        <!-- Cartes de statistiques -->
        <div class="stats-grid">
          <div *ngFor="let stat of stats"
               [ngClass]="getStatCardClass(stat.color)"
               class="stat-card">
            <div class="stat-icon-wrapper">{{ stat.emoji }}</div>
            <div class="stat-content">
              <div class="stat-label">{{ stat.label }}</div>
              <div class="stat-value">{{ stat.value }}</div>
              <div class="stat-change" [class.positive]="stat.isPositive">
                â†— {{ stat.change }}
              </div>
            </div>
          </div>
        </div>

        <!-- Actions rapides -->
        <div class="section-header">
          <h2 class="section-title">Actions rapides</h2>
        </div>

        <div class="quick-actions">
          <div class="quick-action" (click)="navigateTo('orders')">
            <div class="quick-action-icon">ğŸ“¦</div>
            <div class="quick-action-text">Suivre commande</div>
          </div>
          <div class="quick-action" (click)="navigateTo('products')">
            <div class="quick-action-icon">ğŸ›’</div>
            <div class="quick-action-text">Commander</div>
          </div>
          <div class="quick-action" (click)="navigateTo('loyalty')">
            <div class="quick-action-icon">ğŸ</div>
            <div class="quick-action-text">Mes rÃ©compenses</div>
          </div>
          <div class="quick-action">
            <div class="quick-action-icon">ğŸ’¬</div>
            <div class="quick-action-text">Support</div>
          </div>
        </div>

        <!-- Commandes rÃ©centes -->
        <div class="section-header">
          <h2 class="section-title">Commandes rÃ©centes</h2>
          <button class="btn btn-secondary" (click)="navigateTo('orders')">
            Voir tout â†’
          </button>
        </div>

        <div class="orders-grid">
          <div *ngFor="let order of orders.slice(0, 3)" class="order-card">
            <div class="order-image">{{ order.emoji }}</div>
            <div class="order-info">
              <div class="order-title">{{ order.title }}</div>
              <div class="order-details">
                Commande {{ order.id }} â€¢ {{ order.quantity }}
                {{ order.quantity === 1 ? 'bouteille' : 'bouteilles' }}
              </div>
              <div class="order-meta">
                <span style="color: var(--text-muted);">ğŸ“… {{ order.date }}</span>
                <span class="status-badge" [ngClass]="getStatusClass(order.status)">
                  {{ getStatusText(order.status) }}
                </span>
              </div>
            </div>
            <div class="order-price-section">
              <div class="order-price">{{ order.price | number }} FCFA</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== PAGE: MES COMMANDES ===== -->
    <div *ngIf="currentPage === 'orders'" class="page-section active">
      <div class="content-wrapper">
        <div class="page-header">
          <h1 class="page-title">Mes Commandes ğŸ›’</h1>
          <p class="page-subtitle">Suivez l'Ã©tat de vos commandes en temps rÃ©el</p>
        </div>

        <div class="orders-grid">
          <div *ngFor="let order of orders" class="order-card">
            <div class="order-image">{{ order.emoji }}</div>
            <div class="order-info">
              <div class="order-title">{{ order.title }}</div>
              <div class="order-details">
                Commande {{ order.id }} â€¢ {{ order.quantity }}
                {{ order.quantity === 1 ? 'bouteille' : 'bouteilles' }}
              </div>
              <div class="order-meta">
                <span style="color: var(--text-muted);">ğŸ“… {{ order.date }}</span>
                <span class="status-badge" [ngClass]="getStatusClass(order.status)">
                  {{ getStatusText(order.status) }}
                </span>
              </div>
            </div>
            <div class="order-price-section">
              <div class="order-price">{{ order.price | number }} FCFA</div>
              <button *ngIf="order.status === 'delivered'" class="btn btn-secondary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">
                Racheter
              </button>
              <button *ngIf="order.status === 'processing'" class="btn btn-primary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">
                Suivre
              </button>
              <button *ngIf="order.status === 'cancelled'" class="btn btn-secondary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">
                Racheter
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== PAGE: CATALOGUE ===== -->
    <div *ngIf="currentPage === 'products'" class="page-section active">
      <div class="content-wrapper">
        <div class="page-header">
          <h1 class="page-title">Catalogue Produits ğŸ·</h1>
          <p class="page-subtitle">DÃ©couvrez notre sÃ©lection de boissons premium</p>
        </div>

        <div class="section-header">
          <div></div>
          <div style="display: flex; gap: 1rem;">
            <button class="btn btn-secondary">ğŸ” Filtres</button>
            <button class="btn btn-secondary">â¬‡ Trier</button>
          </div>
        </div>

        <div class="products-grid">
          <div *ngFor="let product of products" class="product-card" (click)="openProductModal(product)">
            <div class="product-image">
              {{ product.emoji }}
              <span *ngIf="product.badge"
                    [class]="'badge-' + product.badge.toLowerCase()"
                    class="product-badge">
                {{ product.badge }}
              </span>
              <button class="favorite-btn"
                      (click)="toggleFavorite(product); $event.stopPropagation()"
                      [class.active]="product.isFavorite">
                {{ product.isFavorite ? 'â¤ï¸' : 'ğŸ¤' }}
              </button>
            </div>
            <div class="product-info">
              <h3 class="product-name">{{ product.name }}</h3>
              <p class="product-category">{{ product.category }}</p>
              <div class="product-footer">
                <span class="product-price">{{ product.price | number }} FCFA</span>
                <button class="add-to-cart" (click)="addToCart(product); $event.stopPropagation()">
                  ğŸ›’
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== PAGE: FAVORIS ===== -->
    <div *ngIf="currentPage === 'favorites'" class="page-section active">
      <div class="content-wrapper">
        <div class="page-header">
          <h1 class="page-title">Mes Favoris â¤ï¸</h1>
          <p class="page-subtitle">Vos produits prÃ©fÃ©rÃ©s en un coup d'Å“il</p>
        </div>

        <div *ngIf="getFavoriteProducts().length > 0; else noFavorites">
          <div class="section-header">
            <div></div>
            <button class="btn btn-danger">ğŸ—‘ï¸ Tout supprimer</button>
          </div>

          <div class="products-grid">
            <div *ngFor="let product of getFavoriteProducts()" class="product-card" (click)="openProductModal(product)">
              <div class="product-image">
                {{ product.emoji }}
                <button class="favorite-btn active"
                        (click)="toggleFavorite(product); $event.stopPropagation()">
                  â¤ï¸
                </button>
              </div>
              <div class="product-info">
                <h3 class="product-name">{{ product.name }}</h3>
                <p class="product-category">{{ product.category }}</p>
                <div class="product-footer">
                  <span class="product-price">{{ product.price | number }} FCFA</span>
                  <button class="add-to-cart" (click)="addToCart(product); $event.stopPropagation()">
                    ğŸ›’
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <ng-template #noFavorites>
          <div class="empty-state">
            <div class="empty-icon">â¤ï¸</div>
            <h2 class="empty-title">Aucun favori</h2>
            <p class="empty-description">
              Ajoutez des produits en favoris pour les retrouver ici
            </p>
            <button class="btn btn-primary" (click)="navigateTo('products')">
              DÃ©couvrir les produits
            </button>
          </div>
        </ng-template>
      </div>
    </div>

    <!-- ===== PAGE: FIDÃ‰LITÃ‰ ===== -->
    <div *ngIf="currentPage === 'loyalty'" class="page-section active">
      <div class="content-wrapper">
        <div class="page-header">
          <h1 class="page-title">Programme de FidÃ©litÃ© ğŸ</h1>
          <p class="page-subtitle">Gagnez des points et dÃ©bloquez des rÃ©compenses</p>
        </div>

        <div class="loyalty-card">
          <div class="loyalty-header">
            <div class="loyalty-title">Votre Statut</div>
            <div class="loyalty-level">â­ {{ loyaltyLevel }}</div>
          </div>
          <div class="loyalty-points">
            <div class="points-value">{{ loyaltyPoints | number }}</div>
            <div class="points-label">Points disponibles</div>
          </div>
          <div class="loyalty-progress">
            <div class="progress-bar" [style.width]="'74%'"></div>
          </div>
          <div class="progress-text">
            250 points pour atteindre le niveau PLATINUM ğŸ’
          </div>
        </div>

        <div class="section-header">
          <h2 class="section-title">RÃ©compenses disponibles</h2>
        </div>

        <div class="rewards-grid">
          <div class="reward-card">
            <div class="reward-icon">ğŸŸï¸</div>
            <div class="reward-title">RÃ©duction 10%</div>
            <div class="reward-description">Sur votre prochaine commande</div>
            <div class="reward-cost">500 pts</div>
            <button class="btn btn-primary" style="width: 100%;">Ã‰changer</button>
          </div>

          <div class="reward-card">
            <div class="reward-icon">ğŸšš</div>
            <div class="reward-title">Livraison Gratuite</div>
            <div class="reward-description">Valable 30 jours</div>
            <div class="reward-cost">300 pts</div>
            <button class="btn btn-primary" style="width: 100%;">Ã‰changer</button>
          </div>

          <div class="reward-card">
            <div class="reward-icon">ğŸ¾</div>
            <div class="reward-title">Bouteille Offerte</div>
            <div class="reward-description">Au choix dans une sÃ©lection</div>
            <div class="reward-cost">1,000 pts</div>
            <button class="btn btn-primary" style="width: 100%;">Ã‰changer</button>
          </div>

          <div class="reward-card">
            <div class="reward-icon">â­</div>
            <div class="reward-title">Upgrade VIP</div>
            <div class="reward-description">AccÃ¨s zone VIP 3 mois</div>
            <div class="reward-cost">2,000 pts</div>
            <button class="btn btn-secondary" style="width: 100%;">BientÃ´t</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== PAGE: PAIEMENTS ===== -->
    <div *ngIf="currentPage === 'payments'" class="page-section active">
      <div class="content-wrapper">
        <div class="page-header">
          <h1 class="page-title">Moyens de Paiement ğŸ’³</h1>
          <p class="page-subtitle">GÃ©rez vos cartes bancaires</p>
        </div>

        <div class="section-header">
          <div></div>
          <button class="btn btn-primary">â• Ajouter une carte</button>
        </div>

        <div class="payment-cards-grid">
          <div class="credit-card visa">
            <div class="card-chip"></div>
            <div class="card-number">â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ 4532</div>
            <div class="card-footer">
              <div class="card-holder-section">
                <div class="card-holder">Titulaire</div>
                <div class="card-name">MARIE DUPONT</div>
              </div>
              <div class="card-expiry-section">
                <div class="card-expiry-label">Expire</div>
                <div class="card-expiry">12/26</div>
              </div>
            </div>
          </div>

          <div class="credit-card mastercard">
            <div class="card-chip"></div>
            <div class="card-number">â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ 8901</div>
            <div class="card-footer">
              <div class="card-holder-section">
                <div class="card-holder">Titulaire</div>
                <div class="card-name">MARIE DUPONT</div>
              </div>
              <div class="card-expiry-section">
                <div class="card-expiry-label">Expire</div>
                <div class="card-expiry">09/25</div>
              </div>
            </div>
          </div>

          <div class="credit-card amex">
            <div class="card-chip"></div>
            <div class="card-number">â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ 2345</div>
            <div class="card-footer">
              <div class="card-holder-section">
                <div class="card-holder">Titulaire</div>
                <div class="card-name">MARIE DUPONT</div>
              </div>
              <div class="card-expiry-section">
                <div class="card-expiry-label">Expire</div>
                <div class="card-expiry">03/27</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== PAGE: ADRESSES ===== -->
    <div *ngIf="currentPage === 'addresses'" class="page-section active">
      <div class="content-wrapper">
        <div class="page-header">
          <h1 class="page-title">Mes Adresses ğŸ“</h1>
          <p class="page-subtitle">GÃ©rez vos adresses de livraison</p>
        </div>

        <div class="section-header">
          <div></div>
          <button class="btn btn-primary">â• Ajouter une adresse</button>
        </div>

        <div class="addresses-grid">
          <div class="address-card default">
            <div class="address-header">
              <div class="address-type">ğŸ  Domicile</div>
              <div class="default-badge">Par dÃ©faut</div>
            </div>
            <div class="address-details">
              Marie Dupont<br>
              45 Avenue des Champs<br>
              Lekki Phase 1<br>
              Lagos, Nigeria<br>
              ğŸ“ +234 801 234 5678
            </div>
            <div class="address-actions">
              <button class="btn btn-secondary" style="flex: 1;">âœï¸ Modifier</button>
              <button class="btn btn-danger" style="flex: 1;">ğŸ—‘ï¸ Supprimer</button>
            </div>
          </div>

          <div class="address-card">
            <div class="address-header">
              <div class="address-type">ğŸ¢ Bureau</div>
            </div>
            <div class="address-details">
              Marie Dupont<br>
              DrinkStore HQ<br>
              Victoria Island<br>
              Lagos, Nigeria<br>
              ğŸ“ +234 809 876 5432
            </div>
            <div class="address-actions">
              <button class="btn btn-secondary" style="flex: 1;">âœï¸ Modifier</button>
              <button class="btn btn-danger" style="flex: 1;">ğŸ—‘ï¸ Supprimer</button>
            </div>
          </div>

          <div class="address-card">
            <div class="address-header">
              <div class="address-type">ğŸ Autre</div>
            </div>
            <div class="address-details">
              Jean Martin<br>
              78 Banana Island<br>
              Ikoyi<br>
              Lagos, Nigeria<br>
              ğŸ“ +234 812 345 6789
            </div>
            <div class="address-actions">
              <button class="btn btn-secondary" style="flex: 1;">âœï¸ Modifier</button>
              <button class="btn btn-danger" style="flex: 1;">ğŸ—‘ï¸ Supprimer</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== PAGE: NOTIFICATIONS ===== -->
    <div *ngIf="currentPage === 'notifications'" class="page-section active">
      <div class="content-wrapper">
        <div class="page-header">
          <h1 class="page-title">Notifications ğŸ””</h1>
          <p class="page-subtitle">Restez informÃ© de toutes vos activitÃ©s</p>
        </div>

        <div class="section-header">
          <div></div>
          <button class="btn btn-secondary">âœ“ Tout marquer comme lu</button>
        </div>

        <div class="notifications-list">
          <div class="notification-item unread">
            <div class="notification-icon success">ğŸ‰</div>
            <div class="notification-content">
              <div class="notification-title">RÃ©compense dÃ©bloquÃ©e !</div>
              <div class="notification-message">
                Vous avez gagnÃ© 150 points de fidÃ©litÃ© pour votre derniÃ¨re commande.
              </div>
            </div>
            <div class="notification-time">Il y a 2h</div>
          </div>

          <div class="notification-item unread">
            <div class="notification-icon info">ğŸ“¦</div>
            <div class="notification-content">
              <div class="notification-title">Commande livrÃ©e</div>
              <div class="notification-message">
                Votre commande #12456 (MoÃ«t & Chandon) a Ã©tÃ© livrÃ©e avec succÃ¨s.
              </div>
            </div>
            <div class="notification-time">Hier</div>
          </div>

          <div class="notification-item">
            <div class="notification-icon warning">ğŸ”¥</div>
            <div class="notification-content">
              <div class="notification-title">Promotion spÃ©ciale</div>
              <div class="notification-message">
                -20% sur tous les champagnes premium ce week-end !
              </div>
            </div>
            <div class="notification-time">Il y a 2 jours</div>
          </div>

          <div class="notification-item">
            <div class="notification-icon success">ğŸ’³</div>
            <div class="notification-content">
              <div class="notification-title">Paiement confirmÃ©</div>
              <div class="notification-message">
                Votre paiement de 25 000 FCFA pour la commande #12457 a Ã©tÃ© confirmÃ©.
              </div>
            </div>
            <div class="notification-time">Il y a 3 jours</div>
          </div>

          <div class="notification-item">
            <div class="notification-icon info">ğŸ</div>
            <div class="notification-content">
              <div class="notification-title">Nouveau niveau atteint</div>
              <div class="notification-message">
                FÃ©licitations ! Vous Ãªtes maintenant membre GOLD.
              </div>
            </div>
            <div class="notification-time">Il y a 1 semaine</div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- ===== CHAT WIDGET ===== -->
  <div class="chat-widget">
    <button class="chat-button">
      ğŸ’¬
      <div class="chat-badge">2</div>
    </button>
  </div>

  <!-- ===== MODAL PRODUIT ===== -->
  <div class="modal" [class.active]="showModal" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2 class="modal-title">DÃ©tails du produit</h2>
        <button class="close-btn" (click)="closeModal()">Ã—</button>
      </div>

      <div *ngIf="selectedProduct" class="modal-body">
        <div style="text-align: center; margin-bottom: 2rem;">
          <div style="font-size: 8rem; margin-bottom: 1rem;">
            {{ selectedProduct.emoji }}
          </div>
          <h3 style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem;">
            {{ selectedProduct.name }}
          </h3>
          <p style="color: var(--text-muted); margin-bottom: 1rem;">
            {{ selectedProduct.category }}
          </p>
          <div style="font-size: 2.5rem; font-weight: 800; color: var(--success); margin-bottom: 2rem;">
            {{ selectedProduct.price | number }} FCFA
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Description</label>
          <p style="color: var(--text-muted); line-height: 1.8;">
            Produit premium sÃ©lectionnÃ© avec soin pour vous offrir la meilleure expÃ©rience.
            DÃ©couvrez ses caractÃ©ristiques uniques et saveurs exceptionnelles qui en font un choix privilÃ©giÃ© parmi nos clients.
          </p>
        </div>

        <div class="form-group">
          <label class="form-label">QuantitÃ©</label>
          <div style="display: flex; gap: 1rem; align-items: center;">
            <button class="btn btn-secondary" (click)="decreaseQuantity()" style="width: 50px; padding: 0.75rem;">
              âˆ’
            </button>
            <input type="number"
                   class="form-input"
                   [value]="modalQuantity"
                   style="text-align: center; max-width: 100px;">
            <button class="btn btn-secondary" (click)="increaseQuantity()" style="width: 50px; padding: 0.75rem;">
              +
            </button>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" (click)="closeModal()">Annuler</button>
        <button class="btn btn-primary" (click)="addProductFromModal()">
          ğŸ›’ Ajouter au panier
        </button>
      </div>
    </div>
  </div>
</div>
